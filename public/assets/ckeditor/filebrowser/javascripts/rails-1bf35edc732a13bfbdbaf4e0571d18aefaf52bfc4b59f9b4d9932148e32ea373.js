!function(e,t){var a;e.rails=a={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var a=e('meta[name="csrf-token"]').attr("content");a&&t.setRequestHeader("X-CSRF-Token",a)},fire:function(t,a,i){var n=e.Event(a);return t.trigger(n,i),n.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},handleRemote:function(i){var n,o,l,r,s=i.data("cross-domain")||null,d=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(a.fire(i,"ajax:before")){if(i.is("form")){n=i.attr("method"),o=i.attr("action"),l=i.serializeArray();var c=i.data("ujs:submit-button");c&&(l.push(c),i.data("ujs:submit-button",null))}else i.is(a.inputChangeSelector)?(n=i.data("method"),o=i.data("url"),l=i.serialize(),i.data("params")&&(l=l+"&"+i.data("params"))):(n=i.data("method"),o=i.attr("href"),l=i.data("params")||null);return r={type:n||"GET",data:l,dataType:d,crossDomain:s,beforeSend:function(e,n){return n.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+n.accepts.script),a.fire(i,"ajax:beforeSend",[e,n])},success:function(e,t,a){i.trigger("ajax:success",[e,t,a])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,a){i.trigger("ajax:error",[e,t,a])}},o&&(r.url=o),a.ajax(r)}return!1},handleMethod:function(a){var i=a.attr("href"),n=a.data("method"),o=a.attr("target"),l=e("meta[name=csrf-token]").attr("content"),r=e("meta[name=csrf-param]").attr("content"),s=e('<form method="post" action="'+i+'"></form>'),d='<input name="_method" value="'+n+'" type="hidden" />';r!==t&&l!==t&&(d+='<input name="'+r+'" value="'+l+'" type="hidden" />'),o&&s.attr("target",o),s.hide().append(d).appendTo("body"),s.submit()},disableFormElements:function(t){t.find(a.disableSelector).each(function(){var t=e(this),a=t.is("button")?"html":"val";t.data("ujs:enable-with",t[a]()),t[a](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(a.enableSelector).each(function(){var t=e(this),a=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[a](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,i=e.data("confirm"),n=!1;return!i||(a.fire(e,"confirm")&&(n=a.confirm(i),t=a.fire(e,"confirm:complete",[n])),n&&t)},blankInputs:function(t,a,i){var n,o=e(),l=a||"input,textarea";return t.find(l).each(function(){n=e(this),(i?n.val():!n.val())&&(o=o.add(n))}),!!o.length&&o},nonBlankInputs:function(e,t){return a.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(a,i){var n=a.data("events"),o=!0;return n!==t&&n.submit!==t&&e.each(n.submit,function(e,t){if("function"==typeof t.handler)return o=t.handler(i)}),o},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return a.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},e.ajaxPrefilter(function(e,t,i){e.crossDomain||a.CSRFProtection(i)}),e(document).delegate(a.linkDisableSelector,"ajax:complete",function(){a.enableElement(e(this))}),e(document).delegate(a.linkClickSelector,"click.rails",function(i){var n=e(this),o=n.data("method"),l=n.data("params");return a.allowAction(n)?(n.is(a.linkDisableSelector)&&a.disableElement(n),n.data("remote")!==t?!(!i.metaKey&&!i.ctrlKey||o&&"GET"!==o||l)||(a.handleRemote(n)===!1&&a.enableElement(n),!1):n.data("method")?(a.handleMethod(n),!1):void 0):a.stopEverything(i)}),e(document).delegate(a.inputChangeSelector,"change.rails",function(t){var i=e(this);return a.allowAction(i)?(a.handleRemote(i),!1):a.stopEverything(t)}),e(document).delegate(a.formSubmitSelector,"submit.rails",function(i){var n=e(this),o=n.data("remote")!==t,l=a.blankInputs(n,a.requiredInputSelector),r=a.nonBlankInputs(n,a.fileInputSelector);return a.allowAction(n)?l&&n.attr("novalidate")==t&&a.fire(n,"ajax:aborted:required",[l])?a.stopEverything(i):o?r?a.fire(n,"ajax:aborted:file",[r]):!e.support.submitBubbles&&e().jquery<"1.7"&&a.callFormSubmitBindings(n,i)===!1?a.stopEverything(i):(a.handleRemote(n),!1):void setTimeout(function(){a.disableFormElements(n)},13):a.stopEverything(i)}),e(document).delegate(a.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!a.allowAction(i))return a.stopEverything(t);var n=i.attr("name"),o=n?{name:n,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),e(document).delegate(a.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&a.disableFormElements(e(this))}),e(document).delegate(a.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&a.enableFormElements(e(this))})}(jQuery);