!function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){function e(a,i){if(!(this instanceof e))return new e(a,i);this.options=i=i?Ri(i):{},Ri(Mn,i,!1),m(i);var n=i.value;"string"==typeof n&&(n=new dl(n,i.mode)),this.doc=n;var l=new e.inputStyles[i.inputStyle](this),l=this.display=new t(a,n,l);l.wrapper.CodeMirror=this,s(this),o(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),i.autofocus&&!hn&&l.input.focus(),b(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Ci,keySeq:null,specialChars:null};var r=this;ln&&11>on&&setTimeout(function(){r.display.input.reset(!0)},20),mt(this),Nl||(Hi(),Nl=!0),Qe(this),this.curOp.forceUpdate=!0,$a(this,n),i.autofocus&&!hn||r.hasFocus()?setTimeout(Ii(Pt,this),20):Nt(this);for(var d in Vn)Vn.hasOwnProperty(d)&&Vn[d](this,i[d],Kn);for(S(this),i.finishInit&&i.finishInit(this),n=0;n<Wn.length;++n)Wn[n](this);Xe(this),rn&&i.lineWrapping&&"optimizelegibility"==getComputedStyle(l.lineDiv).textRendering&&(l.lineDiv.style.textRendering="auto")}function t(e,t,a){this.input=a,this.scrollbarFiller=Pi("div",null,"CodeMirror-scrollbar-filler"),this.scrollbarFiller.setAttribute("cm-not-content","true"),this.gutterFiller=Pi("div",null,"CodeMirror-gutter-filler"),this.gutterFiller.setAttribute("cm-not-content","true"),this.lineDiv=Pi("div",null,"CodeMirror-code"),this.selectionDiv=Pi("div",null,null,"position: relative; z-index: 1"),this.cursorDiv=Pi("div",null,"CodeMirror-cursors"),this.measure=Pi("div",null,"CodeMirror-measure"),this.lineMeasure=Pi("div",null,"CodeMirror-measure"),this.lineSpace=Pi("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none"),this.mover=Pi("div",[Pi("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative"),this.sizer=Pi("div",[this.mover],"CodeMirror-sizer"),this.sizerWidth=null,this.heightForcer=Pi("div",null,null,"position: absolute; height: "+kl+"px; width: 1px;"),this.gutters=Pi("div",null,"CodeMirror-gutters"),this.lineGutter=null,this.scroller=Pi("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll"),this.scroller.setAttribute("tabIndex","-1"),this.wrapper=Pi("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror"),ln&&8>on&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0),rn||tn&&hn||(this.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(this.wrapper):e(this.wrapper)),this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=t.first,this.view=[],this.externalMeasured=this.renderedView=null,this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0,this.updateLineNumbers=null,this.nativeBarWidth=this.barHeight=this.barWidth=0,this.scrollbarsClipped=!1,this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null,this.alignWidgets=!1,this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null,this.maxLineLength=0,this.maxLineChanged=!1,this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null,this.shift=!1,this.activeTouch=this.selForContextMenu=null,a.init(this)}function a(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),i(t)}function i(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Ae(e,100),e.state.modeGen++,e.curOp&&ot(e)}function n(e){var t=Ze(e.display),a=e.options.lineWrapping,i=a&&Math.max(5,e.display.scroller.clientWidth/Je(e.display)-3);return function(n){if(Aa(e.doc,n))return 0;var l=0;if(n.widgets)for(var o=0;o<n.widgets.length;o++)n.widgets[o].height&&(l+=n.widgets[o].height);return a?l+(Math.ceil(n.text.length/i)||1)*t:l+t}}function l(e){var t=e.doc,a=n(e);t.iter(function(e){var t=a(e);t!=e.height&&Qa(e,t)})}function o(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ke(e)}function r(e){s(e),ot(e),setTimeout(function(){y(e)},20)}function s(e){var t=e.display.gutters,a=e.options.gutters;Ni(t);for(var i=0;i<a.length;++i){var n=a[i],l=t.appendChild(Pi("div",null,"CodeMirror-gutter "+n));"CodeMirror-linenumbers"==n&&(e.display.lineGutter=l,l.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none",d(e)}function d(e){e.display.sizer.style.marginLeft=e.display.gutters.offsetWidth+"px"}function c(e){if(0==e.height)return 0;for(var t,a=e.text.length,i=e;t=ya(i,!0);)t=t.find(0,!0),i=t.from.line,a+=t.from.ch-t.to.ch;for(i=e;t=ya(i,!1);)t=t.find(0,!0),a-=i.text.length-t.from.ch,i=t.to.line,a+=i.text.length-t.to.ch;return a}function u(e){var t=e.display;e=e.doc,t.maxLine=Ya(e,e.first),t.maxLineLength=c(t.maxLine),t.maxLineChanged=!0,e.iter(function(e){var a=c(e);a>t.maxLineLength&&(t.maxLineLength=a,t.maxLine=e)})}function m(e){var t=Li(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function p(e){var t=e.display,a=t.gutters.offsetWidth,i=Math.round(e.doc.height+De(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?a:0,docHeight:i,scrollHeight:i+Ie(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:a}}function g(e,t,a){this.cm=a;var i=this.vert=Pi("div",[Pi("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=Pi("div",[Pi("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(n),hl(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),hl(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedOverlay=!1,ln&&8>on&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function h(){}function b(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&zl(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),hl(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,a){"horizontal"==a?Tt(t,e):Ct(t,e)},t),t.display.scrollbars.addClass&&Pl(t.display.wrapper,t.display.scrollbars.addClass)}function v(e,t){t||(t=p(e));var a=e.display.barWidth,i=e.display.barHeight;f(e,t);for(var n=0;4>n&&a!=e.display.barWidth||i!=e.display.barHeight;n++)a!=e.display.barWidth&&e.options.lineWrapping&&D(e),f(e,p(e)),a=e.display.barWidth,i=e.display.barHeight}function f(e,t){var a=e.display,i=a.scrollbars.update(t);a.sizer.style.paddingRight=(a.barWidth=i.right)+"px",a.sizer.style.paddingBottom=(a.barHeight=i.bottom)+"px",i.right&&i.bottom?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=i.bottom+"px",a.scrollbarFiller.style.width=i.right+"px"):a.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(a.gutterFiller.style.display="block",a.gutterFiller.style.height=i.bottom+"px",a.gutterFiller.style.width=t.gutterWidth+"px"):a.gutterFiller.style.display=""}function k(e,t,a){var i=a&&null!=a.top?Math.max(0,a.top):e.scroller.scrollTop,i=Math.floor(i-e.lineSpace.offsetTop),n=a&&null!=a.bottom?a.bottom:i+e.wrapper.clientHeight,i=ei(t,i),n=ei(t,n);if(a&&a.ensure){var l=a.ensure.from.line;a=a.ensure.to.line,l<i?(i=l,n=ei(t,ti(Ya(t,l))+e.wrapper.clientHeight)):Math.min(a,t.lastLine())>=n&&(i=ei(t,ti(Ya(t,a))-e.wrapper.clientHeight),n=a)}return{from:i,to:Math.max(n,i+1)}}function y(e){var t=e.display,a=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=T(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,l=i+"px",o=0;o<a.length;o++)if(!a[o].hidden){e.options.fixedGutter&&a[o].gutter&&(a[o].gutter.style.left=l);var r=a[o].alignable;if(r)for(var s=0;s<r.length;s++)r[s].style.left=l}e.options.fixedGutter&&(t.gutters.style.left=i+n+"px")}}function S(e){if(!e.options.lineNumbers)return!1;var t=e.doc,t=C(e.options,t.first+t.size-1),a=e.display;if(t.length!=a.lineNumChars){var i=a.measure.appendChild(Pi("div",[Pi("div",t)],"CodeMirror-linenumber CodeMirror-gutter-elt")),n=i.firstChild.offsetWidth,i=i.offsetWidth-n;return a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(n,a.lineGutter.offsetWidth-i)+1,a.lineNumWidth=a.lineNumInnerWidth+i,a.lineNumChars=a.lineNumInnerWidth?t.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",d(e),!0}return!1}function C(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function T(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function w(e,t,a){var i=e.display;this.viewport=t,this.visible=k(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Be(e),this.force=a,this.dims=I(e),this.events=[]}function A(e,t){var a=e.display,i=e.doc;if(t.editorIsHidden)return st(e),!1;if(!t.force&&t.visible.from>=a.viewFrom&&t.visible.to<=a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>=a.viewTo)&&a.renderedView==a.view&&0==ut(e))return!1;S(e)&&(st(e),t.dims=I(e));var n=i.first+i.size,l=Math.max(t.visible.from-e.options.viewportMargin,i.first),o=Math.min(n,t.visible.to+e.options.viewportMargin);return a.viewFrom<l&&20>l-a.viewFrom&&(l=Math.max(i.first,a.viewFrom)),a.viewTo>o&&20>a.viewTo-o&&(o=Math.min(n,a.viewTo)),Cn&&(l=Ta(e.doc,l),o=wa(e.doc,o)),i=l!=a.viewFrom||o!=a.viewTo||a.lastWrapHeight!=t.wrapperHeight||a.lastWrapWidth!=t.wrapperWidth,n=e.display,0==n.view.length||l>=n.viewTo||o<=n.viewFrom?(n.view=lt(e,l,o),n.viewFrom=l):(n.viewFrom>l?n.view=lt(e,l,n.viewFrom).concat(n.view):n.viewFrom<l&&(n.view=n.view.slice(dt(e,l))),n.viewFrom=l,n.viewTo<o?n.view=n.view.concat(lt(e,n.viewTo,o)):n.viewTo>o&&(n.view=n.view.slice(0,dt(e,o)))),n.viewTo=o,a.viewOffset=ti(Ya(e.doc,a.viewFrom)),e.display.mover.style.top=a.viewOffset+"px",o=ut(e),!(!i&&0==o&&!t.force&&a.renderedView==a.view&&(null==a.updateLineNumbers||a.updateLineNumbers>=a.viewTo))&&(l=ji(),4<o&&(a.lineDiv.style.display="none"),B(e,a.updateLineNumbers,t.dims),4<o&&(a.lineDiv.style.display=""),a.renderedView=a.view,l&&ji()!=l&&l.offsetHeight&&l.focus(),Ni(a.cursorDiv),Ni(a.selectionDiv),a.gutters.style.height=0,i&&(a.lastWrapHeight=t.wrapperHeight,a.lastWrapWidth=t.wrapperWidth,Ae(e,400)),a.updateLineNumbers=null,!0)}function L(e,t){for(var a=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Be(e)||(a&&null!=a.top&&(a={top:Math.min(e.doc.height+De(e.display)-xe(e),a.top)}),t.visible=k(e.display,e.doc,a),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&A(e,t);i=!1)D(e),i=p(e),Se(e),F(e,i),v(e,i);t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function E(e,t){var a=new w(e,t);if(A(e,a)){D(e),L(e,a);var i=p(e);Se(e),F(e,i),v(e,i),a.finish()}}function F(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var a=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=a+"px",e.display.gutters.style.height=Math.max(a+Ie(e),t.clientHeight)+"px"}function D(e){e=e.display;for(var t=e.lineDiv.offsetTop,a=0;a<e.view.length;a++){var i,n=e.view[a];if(!n.hidden){if(ln&&8>on){var l=n.node.offsetTop+n.node.offsetHeight;i=l-t,t=l}else i=n.node.getBoundingClientRect(),i=i.bottom-i.top;if(l=n.line.height-i,2>i&&(i=Ze(e)),(.001<l||-.001>l)&&(Qa(n.line,i),R(n.line),n.rest))for(i=0;i<n.rest.length;i++)R(n.rest[i])}}}function R(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function I(e){for(var t=e.display,a={},i={},n=t.gutters.clientLeft,l=t.gutters.firstChild,o=0;l;l=l.nextSibling,++o)a[e.options.gutters[o]]=l.offsetLeft+l.clientLeft+n,i[e.options.gutters[o]]=l.clientWidth;return{fixedPos:T(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:a,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function B(e,t,a){function i(t){var a=t.nextSibling;return rn&&bn&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),a}for(var n=e.display,l=e.options.lineNumbers,o=n.lineDiv,r=o.firstChild,s=n.view,n=n.viewFrom,d=0;d<s.length;d++){var c=s[d];if(!c.hidden)if(c.node&&c.node.parentNode==o){for(;r!=c.node;)r=i(r);r=l&&null!=t&&t<=n&&c.lineNumber,c.changes&&(-1<Li(c.changes,"gutter")&&(r=!1),x(e,c,n,a)),r&&(Ni(c.lineNumber),c.lineNumber.appendChild(document.createTextNode(C(e.options,n)))),r=c.node.nextSibling}else{var u=j(e,c,n,a);o.insertBefore(u,r)}n+=c.size}for(;r;)r=i(r)}function x(e,t,a,i){for(var n=0;n<t.changes.length;n++){var l=t.changes[n];if("text"==l){var l=t,o=l.text.className,r=P(e,l);l.text==l.node&&(l.node=r.pre),l.text.parentNode.replaceChild(r.pre,l.text),l.text=r.pre,r.bgClass!=l.bgClass||r.textClass!=l.textClass?(l.bgClass=r.bgClass,l.textClass=r.textClass,N(l)):o&&(l.text.className=o)}else if("gutter"==l)O(e,t,a,i);else if("class"==l)N(t);else if("widget"==l){l=e,o=t,r=i,o.alignable&&(o.alignable=null);for(var s=o.node.firstChild,d=void 0;s;s=d)d=s.nextSibling,"CodeMirror-linewidget"==s.className&&o.node.removeChild(s);M(l,o,r)}}t.changes=null}function z(e){return e.node==e.text&&(e.node=Pi("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),ln&&8>on&&(e.node.style.zIndex=2)),e.node}function P(e,t){var a=e.display.externalMeasured;return a&&a.line==t.line?(e.display.externalMeasured=null,t.measure=a.measure,a.built):ja(e,t)}function N(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var a=z(e);e.background=a.insertBefore(Pi("div",null,t),a.firstChild)}e.line.wrapClass?z(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className=""),e.text.className=(e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass)||""}function O(e,t,a,i){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var n=t.line.gutterMarkers;if(e.options.lineNumbers||n){var l=z(t),o=t.gutter=Pi("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px");if(e.display.input.setUneditable(o),l.insertBefore(o,t.text),t.line.gutterClass&&(o.className+=" "+t.line.gutterClass),!e.options.lineNumbers||n&&n["CodeMirror-linenumbers"]||(t.lineNumber=o.appendChild(Pi("div",C(e.options,a),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),n)for(t=0;t<e.options.gutters.length;++t)a=e.options.gutters[t],(l=n.hasOwnProperty(a)&&n[a])&&o.appendChild(Pi("div",[l],"CodeMirror-gutter-elt","left: "+i.gutterLeft[a]+"px; width: "+i.gutterWidth[a]+"px"))}}function j(e,t,a,i){var n=P(e,t);return t.text=t.node=n.pre,n.bgClass&&(t.bgClass=n.bgClass),n.textClass&&(t.textClass=n.textClass),N(t),O(e,t,a,i),M(e,t,i),t.node}function M(e,t,a){if(V(e,t.line,t,a,!0),t.rest)for(var i=0;i<t.rest.length;i++)V(e,t.rest[i],t,a,!1)}function V(e,t,a,i,n){if(t.widgets){var l=z(a),o=0;for(t=t.widgets;o<t.length;++o){var r=t[o],s=Pi("div",[r.node],"CodeMirror-linewidget");r.handleMouseEvents||s.setAttribute("cm-ignore-events","true");var d=r,c=s,u=i;if(d.noHScroll){(a.alignable||(a.alignable=[])).push(c);var m=u.wrapperWidth;c.style.left=u.fixedPos+"px",d.coverGutter||(m-=u.gutterTotalWidth,c.style.paddingLeft=u.gutterTotalWidth+"px"),c.style.width=m+"px"}d.coverGutter&&(c.style.zIndex=5,c.style.position="relative",d.noHScroll||(c.style.marginLeft=-u.gutterTotalWidth+"px")),e.display.input.setUneditable(s),n&&r.above?l.insertBefore(s,a.gutter||a.text):l.appendChild(s),bi(r,"redraw")}}}function K(e){return Tn(e.line,e.ch)}function H(e,t){return 0>wn(e,t)?t:e}function _(e,t){return 0>wn(e,t)?e:t}function q(e){e.state.focused||(e.display.input.focus(),Pt(e))}function W(e){return e.options.readOnly||e.doc.cantEdit}function U(e,t,a,i,n){var l=e.doc;e.display.shift=!1,i||(i=l.sel);var o=jl(t),r=null;e.state.pasteIncoming&&1<i.ranges.length&&(An&&An.join("\n")==t?r=0==i.ranges.length%An.length&&Ei(An,jl):o.length==i.ranges.length&&(r=Ei(o,function(e){return[e]})));for(var s=i.ranges.length-1;0<=s;s--){var d=i.ranges[s],c=d.from(),u=d.to();d.empty()&&(a&&0<a?c=Tn(c.line,c.ch-a):e.state.overwrite&&!e.state.pasteIncoming&&(u=Tn(u.line,Math.min(Ya(l,u.line).text.length,u.ch+Ai(o).length))));var m=e.curOp.updateInput,c={from:c,to:u,text:r?r[s%r.length]:o,origin:n||(e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input")};if(Ht(e.doc,c),bi(e,"inputRead",e,c),t&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&100>d.head.ch&&(!s||i.ranges[s-1].head.line!=d.head.line)){if(d=e.getModeAt(d.head),c=jn(c),u=!1,d.electricChars){for(var p=0;p<d.electricChars.length;p++)if(-1<t.indexOf(d.electricChars.charAt(p))){u=Xt(e,c.line,"smart");break}}else d.electricInput&&d.electricInput.test(Ya(l,c.line).text.slice(0,c.ch))&&(u=Xt(e,c.line,"smart"));u&&bi(e,"electricInput",e,c.line)}}Jt(e),e.curOp.updateInput=m,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function G(e){for(var t=[],a=[],i=0;i<e.doc.sel.ranges.length;i++){var n=e.doc.sel.ranges[i].head.line,n={anchor:Tn(n,0),head:Tn(n+1,0)};a.push(n),t.push(e.getRange(n.anchor,n.head))}return{text:t,ranges:a}}function $(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function Y(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ci,this.hasSelection=this.inaccurateSelection=!1,this.composing=null}function Z(){var e=Pi("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=Pi("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return rn?e.style.width="1000px":e.setAttribute("wrap","off"),gn&&(e.style.border="1px solid black"),$(e),t}function J(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ci,this.gracePeriod=!1}function Q(e,t){var a=Pe(e,t.line);if(!a||a.hidden)return null;var i=Ya(e.doc,t.line),a=ze(a,i,t.line);return(i=ai(i))&&Ji(i,t.ch),i=je(a.map,t.ch,"left"),i.offset="right"==i.collapse?i.end:i.start,i}function X(e,t){return t&&(e.bad=!0),e}function ee(e,t,a){var i;if(t==e.display.lineDiv){if(i=e.display.lineDiv.childNodes[a],!i)return X(e.clipPos(Tn(e.display.viewTo-1)),!0);t=null,a=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var l=e.display.view[n];if(l.node==i)return te(l,t,a)}}function te(e,t,a){function i(t,a,i){for(var n=-1;n<(d?d.length:0);n++)for(var l=0>n?s.map:d[n],o=0;o<l.length;o+=3){var r=l[o+2];if(r==t||r==a)return a=Xa(0>n?e.line:e.rest[n]),n=l[o]+i,(0>i||r!=t)&&(n=l[o+(i?1:0)]),Tn(a,n)}}var n=e.text.firstChild,l=!1;if(!t||!Il(n,t))return X(Tn(Xa(e.line),0),!0);if(t==n&&(l=!0,t=n.childNodes[a],a=0,!t))return a=e.rest?Ai(e.rest):e.line,X(Tn(Xa(a),a.text.length),l);var o=3==t.nodeType?t:null,r=t;for(o||1!=t.childNodes.length||3!=t.firstChild.nodeType||(o=t.firstChild,a&&(a=o.nodeValue.length));r.parentNode!=n;)r=r.parentNode;var s=e.measure,d=s.maps;if(t=i(o,r,a))return X(t,l);for(n=r.nextSibling,o=o?o.nodeValue.length-a:0;n;n=n.nextSibling){if(t=i(n,n.firstChild,0))return X(Tn(t.line,t.ch-o),l);o+=n.textContent.length}for(r=r.previousSibling,o=a;r;r=r.previousSibling){if(t=i(r,r.firstChild,-1))return X(Tn(t.line,t.ch+o),l);o+=n.textContent.length}}function ae(e,t,a,i,n){function l(e){return function(t){return t.id==e}}function o(t){if(1==t.nodeType){var a=t.getAttribute("cm-text");if(null!=a)""==a&&(a=t.textContent.replace(/\u200b/g,"")),r+=a;else{var d,a=t.getAttribute("cm-marker");if(a)t=e.findMarks(Tn(i,0),Tn(n+1,0),l(+a)),t.length&&(d=t[0].find())&&(r+=Za(e.doc,d.from,d.to).join("\n"));else if("false"!=t.getAttribute("contenteditable")){for(d=0;d<t.childNodes.length;d++)o(t.childNodes[d]);/^(pre|div|p)$/i.test(t.nodeName)&&(s=!0)}}}else 3==t.nodeType&&(t=t.nodeValue)&&(s&&(r+="\n",s=!1),r+=t)}for(var r="",s=!1;o(t),t!=a;)t=t.nextSibling;return r}function ie(e,t){this.ranges=e,this.primIndex=t}function ne(e,t){this.anchor=e,this.head=t}function le(e,t){var a=e[t];for(e.sort(function(e,t){return wn(e.from(),t.from())}),t=Li(e,a),a=1;a<e.length;a++){var i=e[a],n=e[a-1];if(0<=wn(n.to(),i.from())){var l=_(n.from(),i.from()),o=H(n.to(),i.to()),i=n.empty()?i.from()==i.head:n.from()==n.head;a<=t&&--t,e.splice(--a,2,new ne(i?o:l,i?l:o))}}return new ie(e,t)}function oe(e,t){return new ie([new ne(e,t||e)],0)}function re(e,t){if(t.line<e.first)return Tn(e.first,0);var a=e.first+e.size-1;if(t.line>a)return Tn(a,Ya(e,a).text.length);var a=Ya(e,t.line).text.length,i=t.ch,a=null==i||i>a?Tn(t.line,a):0>i?Tn(t.line,0):t;return a}function se(e,t){return t>=e.first&&t<e.first+e.size}function de(e,t,a,i){return e.cm&&e.cm.display.shift||e.extend?(e=t.anchor,i&&(t=0>wn(a,e),t!=0>wn(i,e)?(e=a,a=i):t!=0>wn(a,i)&&(a=i)),new ne(e,a)):new ne(i||a,a)}function ce(e,t,a,i){he(e,new ie([de(e,e.sel.primary(),t,a)],0),i)}function ue(e,t,a){for(var i=[],n=0;n<e.sel.ranges.length;n++)i[n]=de(e,e.sel.ranges[n],t[n],null);t=le(i,e.sel.primIndex),he(e,t,a)}function me(e,t,a,i){var n=e.sel.ranges.slice(0);n[t]=a,he(e,le(n,e.sel.primIndex),i)}function pe(e,t){var a={ranges:t.ranges,update:function(t){this.ranges=[];for(var a=0;a<t.length;a++)this.ranges[a]=new ne(re(e,t[a].anchor),re(e,t[a].head))}};return vl(e,"beforeSelectionChange",e,a),e.cm&&vl(e.cm,"beforeSelectionChange",e.cm,a),a.ranges!=t.ranges?le(a.ranges,a.ranges.length-1):t}function ge(e,t,a){var i=e.history.done,n=Ai(i);n&&n.ranges?(i[i.length-1]=t,be(e,t,a)):he(e,t,a)}function he(e,t,a){be(e,t,a),t=e.sel;var i,n=e.cm?e.cm.curOp.id:NaN,l=e.history,o=a&&a.origin;if(!(i=n==l.lastSelOp)&&(i=o&&l.lastSelOrigin==o)&&!(i=l.lastModTime==l.lastSelTime&&l.lastOrigin==o)){i=Ai(l.done);var r=o.charAt(0);i="*"==r||"+"==r&&i.ranges.length==t.ranges.length&&i.somethingSelected()==t.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}i?l.done[l.done.length-1]=t:ri(t,l.done),l.lastSelTime=+new Date,l.lastSelOrigin=o,l.lastSelOp=n,a&&!1!==a.clearRedo&&li(l.undone)}function be(e,t,a){(yi(e,"beforeSelectionChange")||e.cm&&yi(e.cm,"beforeSelectionChange"))&&(t=pe(e,t));var i=a&&a.bias||(0>wn(t.primary().head,e.sel.primary().head)?-1:1);ve(e,ke(e,t,i,!0)),a&&!1===a.scroll||!e.cm||Jt(e.cm)}function ve(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,ki(e.cm)),bi(e,"cursorActivity",e))}function fe(e){ve(e,ke(e,e.sel,null,!1),Sl)}function ke(e,t,a,i){for(var n,l=0;l<t.ranges.length;l++){var o=t.ranges[l],r=ye(e,o.anchor,a,i),s=ye(e,o.head,a,i);(n||r!=o.anchor||s!=o.head)&&(n||(n=t.ranges.slice(0,l)),n[l]=new ne(r,s))}return n?le(n,t.primIndex):t}function ye(e,t,a,i){var n=!1,l=t,o=a||1;e.cantEdit=!1;e:for(;;){var r=Ya(e,l.line);if(r.markedSpans)for(var s=0;s<r.markedSpans.length;++s){var d=r.markedSpans[s],c=d.marker;if((null==d.from||(c.inclusiveLeft?d.from<=l.ch:d.from<l.ch))&&(null==d.to||(c.inclusiveRight?d.to>=l.ch:d.to>l.ch))){if(i&&(vl(c,"beforeCursorEnter"),c.explicitlyCleared)){if(r.markedSpans){--s;continue}break}if(c.atomic){if(s=c.find(0>o?-1:1),0==wn(s,l)&&(s.ch+=o,0>s.ch?s=s.line>e.first?re(e,Tn(s.line-1)):null:s.ch>r.text.length&&(s=s.line<e.first+e.size-1?Tn(s.line+1,0):null),!s)){if(n)return i?(e.cantEdit=!0,Tn(e.first,0)):ye(e,t,a,!0);n=!0,s=t,o=-o}l=s;continue e}}}return l}}function Se(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ce(e,t){for(var a=e.doc,i={},n=i.cursors=document.createDocumentFragment(),l=i.selection=document.createDocumentFragment(),o=0;o<a.sel.ranges.length;o++)if(!1!==t||o!=a.sel.primIndex){var r=a.sel.ranges[o],s=r.empty();if(s||e.options.showCursorWhenSelecting){var d=e,c=n,u=We(d,r.head,"div",null,null,!d.options.singleCursorHeightPerLine),m=c.appendChild(Pi("div","\xa0","CodeMirror-cursor"));m.style.left=u.left+"px",m.style.top=u.top+"px",m.style.height=Math.max(0,u.bottom-u.top)*d.options.cursorHeight+"px",u.other&&(d=c.appendChild(Pi("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor")),d.style.display="",d.style.left=u.other.left+"px",d.style.top=u.other.top+"px",d.style.height=.85*(u.other.bottom-u.other.top)+"px")}s||Te(e,r,l)}return i}function Te(e,t,a){function i(e,t,a,i){0>t&&(t=0),t=Math.round(t),i=Math.round(i),r.appendChild(Pi("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==a?c-e:a)+"px; height: "+(i-t)+"px"))}function n(t,a,n){var l,r,s=Ya(o,t),u=s.text.length;return qi(ai(s),a||0,null==n?u:n,function(o,m,p){var g,h,b=qe(e,Tn(t,o),"div",s,"left");o==m?(g=b,p=h=b.left):(g=qe(e,Tn(t,m-1),"div",s,"right"),"rtl"==p&&(p=b,b=g,g=p),p=b.left,h=g.right),null==a&&0==o&&(p=d),3<g.top-b.top&&(i(p,b.top,null,b.bottom),p=d,b.bottom<g.top&&i(p,b.bottom,null,g.top)),null==n&&m==u&&(h=c),(!l||b.top<l.top||b.top==l.top&&b.left<l.left)&&(l=b),(!r||g.bottom>r.bottom||g.bottom==r.bottom&&g.right>r.right)&&(r=g),p<d+1&&(p=d),i(p,g.top,h-p,g.bottom)}),{start:l,end:r}}var l=e.display,o=e.doc,r=document.createDocumentFragment(),s=Re(e.display),d=s.left,c=Math.max(l.sizerWidth,Be(e)-l.sizer.offsetLeft)-s.right,l=t.from();if(t=t.to(),l.line==t.line)n(l.line,l.ch,t.ch);else{var u=Ya(o,l.line),s=Ya(o,t.line),s=Ca(u)==Ca(s),l=n(l.line,l.ch,s?u.text.length+1:null).end;t=n(t.line,s?0:null,t.ch).start,s&&(l.top<t.top-2?(i(l.right,l.top,null,l.bottom),i(d,t.top,t.left,t.bottom)):i(l.right,l.top,t.left-l.right,l.bottom)),l.bottom<t.top&&i(d,l.bottom,null,t.top)}a.appendChild(r)}function we(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var a=!0;t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(a=!a)?"":"hidden"},e.options.cursorBlinkRate):0>e.options.cursorBlinkRate&&(t.cursorDiv.style.visibility="hidden")}}function Ae(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Ii(Le,e))}function Le(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var a=+new Date+e.options.workTime,i=Gn(t.mode,Fe(e,t.frontier)),n=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(l){if(t.frontier>=e.display.viewFrom){var o=l.styles,r=za(e,l,i,!0);l.styles=r.styles;var s=l.styleClasses;for((r=r.classes)?l.styleClasses=r:s&&(l.styleClasses=null),s=!o||o.length!=l.styles.length||s!=r&&(!s||!r||s.bgClass!=r.bgClass||s.textClass!=r.textClass),r=0;!s&&r<o.length;++r)s=o[r]!=l.styles[r];s&&n.push(t.frontier),l.stateAfter=Gn(t.mode,i)}else Na(e,l.text,i),l.stateAfter=0==t.frontier%5?Gn(t.mode,i):null;if(++t.frontier,+new Date>a)return Ae(e,e.options.workDelay),!0}),n.length&&et(e,function(){for(var t=0;t<n.length;t++)rt(e,n[t],"text")})}}function Ee(e,t,a){for(var i,n,l=e.doc,o=a?-1:t-(e.doc.mode.innerMode?1e3:100);t>o;--t){if(t<=l.first)return l.first;var r=Ya(l,t-1);if(r.stateAfter&&(!a||t<=l.frontier))return t;r=wl(r.text,null,e.options.tabSize),(null==n||i>r)&&(n=t-1,i=r)}return n}function Fe(e,t,a){var i=e.doc,n=e.display;if(!i.mode.startState)return!0;var l=Ee(e,t,a),o=l>i.first&&Ya(i,l-1).stateAfter,o=o?Gn(i.mode,o):$n(i.mode);return i.iter(l,t,function(a){Na(e,a.text,o),a.stateAfter=l==t-1||0==l%5||l>=n.viewFrom&&l<n.viewTo?Gn(i.mode,o):null,++l}),a&&(i.frontier=l),o}function De(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Re(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Oi(e.measure,Pi("pre","x")),t=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,t={left:parseInt(t.paddingLeft),right:parseInt(t.paddingRight)};return isNaN(t.left)||isNaN(t.right)||(e.cachedPaddingH=t),t}function Ie(e){return kl-e.display.nativeBarWidth}function Be(e){return e.display.scroller.clientWidth-Ie(e)-e.display.barWidth}function xe(e){return e.display.scroller.clientHeight-Ie(e)-e.display.barHeight}function ze(e,t,a){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(i=0;i<e.rest.length;i++)if(Xa(e.rest[i])>a)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Pe(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[dt(e,t)];var a=e.display.externalMeasured;return a&&t>=a.lineN&&t<a.lineN+a.size?a:void 0}function Ne(e,t){var a=Xa(t),i=Pe(e,a);if(i&&!i.text?i=null:i&&i.changes&&x(e,i,a,I(e)),!i){var n;n=Ca(t),i=Xa(n),n=e.display.externalMeasured=new nt(e.doc,n,i),n.lineN=i,i=n.built=ja(e,n),n.text=i.pre,Oi(e.display.lineMeasure,i.pre),i=n}return a=ze(i,t,a),{line:t,view:i,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function Oe(e,t,a,i,n){t.before&&(a=-1);var l=a+(i||"");if(t.cache.hasOwnProperty(l))e=t.cache[l];else{if(t.rect||(t.rect=t.view.text.getBoundingClientRect()),!t.hasHeights){var o=t.view,r=t.rect,s=e.options.lineWrapping,d=s&&Be(e);if(!o.measure.heights||s&&o.measure.width!=d){var c=o.measure.heights=[];if(s)for(o.measure.width=d,o=o.text.firstChild.getClientRects(),s=0;s<o.length-1;s++){var d=o[s],u=o[s+1];2<Math.abs(d.bottom-u.bottom)&&c.push((d.bottom+u.top)/2-r.top)}c.push(r.bottom-r.top)}t.hasHeights=!0}o=i,s=je(t.map,a,o),i=s.node,r=s.start,d=s.end,a=s.collapse;var m;if(3==i.nodeType){for(c=0;4>c;c++){for(;r&&zi(t.line.text.charAt(s.coverStart+r));)--r;for(;s.coverStart+d<s.coverEnd&&zi(t.line.text.charAt(s.coverStart+d));)++d;if(ln&&9>on&&0==r&&d==s.coverEnd-s.coverStart)m=i.parentNode.getBoundingClientRect();else if(ln&&e.options.lineWrapping){var p=El(i,r,d).getClientRects();m=p.length?p["right"==o?p.length-1:0]:Dn}else m=El(i,r,d).getBoundingClientRect()||Dn;if(m.left||m.right||0==r)break;d=r,--r,a="right"}ln&&11>on&&((p=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=Kl?p=Kl:(c=Oi(e.display.measure,Pi("span","x")),p=c.getBoundingClientRect(),c=El(c,0,1).getBoundingClientRect(),p=Kl=1<Math.abs(p.left-c.left)),p=!p),p||(p=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI,m={left:m.left*p,right:m.right*p,top:m.top*c,bottom:m.bottom*c}))}else 0<r&&(a=o="right"),m=e.options.lineWrapping&&1<(p=i.getClientRects()).length?p["right"==o?p.length-1:0]:i.getBoundingClientRect();for(!(ln&&9>on)||r||m&&(m.left||m.right)||(m=(m=i.parentNode.getClientRects()[0])?{left:m.left,right:m.left+Je(e.display),top:m.top,bottom:m.bottom}:Dn),p=m.top-t.rect.top,i=m.bottom-t.rect.top,r=(p+i)/2,o=t.view.measure.heights,c=0;c<o.length-1&&!(r<o[c]);c++);a={left:("right"==a?m.right:m.left)-t.rect.left,right:("left"==a?m.left:m.right)-t.rect.left,top:c?o[c-1]:0,bottom:o[c]},m.left||m.right||(a.bogus=!0),e.options.singleCursorHeightPerLine||(a.rtop=p,a.rbottom=i),e=a,e.bogus||(t.cache[l]=e)}return{left:e.left,right:e.right,top:n?e.rtop:e.top,bottom:n?e.rbottom:e.bottom}}function je(e,t,a){for(var i,n,l,o,r=0;r<e.length;r+=3){var s=e[r],d=e[r+1];if(t<s?(n=0,l=1,o="left"):t<d?(n=t-s,l=n+1):(r==e.length-3||t==d&&e[r+3]>t)&&(l=d-s,n=l-1,t>=d&&(o="right")),null!=n){if(i=e[r+2],s==d&&a==(i.insertLeft?"left":"right")&&(o=a),"left"==a&&0==n)for(;r&&e[r-2]==e[r-3]&&e[r-1].insertLeft;)i=e[(r-=3)+2],o="left";if("right"==a&&n==d-s)for(;r<e.length-3&&e[r+3]==e[r+4]&&!e[r+5].insertLeft;)i=e[(r+=3)+2],o="right";break}}return{node:i,start:n,end:l,collapse:o,coverStart:s,coverEnd:d}}function Me(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Ve(e){e.display.externalMeasure=null,Ni(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Me(e.display.view[t])}function Ke(e){Ve(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function He(e,t,a,i){if(t.widgets)for(var n=0;n<t.widgets.length;++n)if(t.widgets[n].above){var l=Ea(t.widgets[n]);a.top+=l,a.bottom+=l}return"line"==i?a:(i||(i="local"),
t=ti(t),t="local"==i?t+e.display.lineSpace.offsetTop:t-e.display.viewOffset,"page"!=i&&"window"!=i||(e=e.display.lineSpace.getBoundingClientRect(),t+=e.top+("window"==i?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),i=e.left+("window"==i?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),a.left+=i,a.right+=i),a.top+=t,a.bottom+=t,a)}function _e(e,t,a){if("div"==a)return t;var i=t.left;return t=t.top,"page"==a?(i-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,t-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=a&&a||(a=e.display.sizer.getBoundingClientRect(),i+=a.left,t+=a.top),e=e.display.lineSpace.getBoundingClientRect(),{left:i-e.left,top:t-e.top}}function qe(e,t,a,i,n){i||(i=Ya(e.doc,t.line));var l=i;return t=t.ch,i=Oe(e,Ne(e,i),t,n),He(e,l,i,a)}function We(e,t,a,i,n,l){function o(t,o){var r=Oe(e,n,t,o?"right":"left",l);return o?r.left=r.right:r.right=r.left,He(e,i,r,a)}function r(e,t){var a=s[t],i=a.level%2;return e==Wi(a)&&t&&a.level<s[t-1].level?(a=s[--t],e=Ui(a)-(a.level%2?0:1),i=!0):e==Ui(a)&&t<s.length-1&&a.level<s[t+1].level&&(a=s[++t],e=Wi(a)-a.level%2,i=!1),i&&e==a.to&&e>a.from?o(e-1):o(e,i)}i=i||Ya(e.doc,t.line),n||(n=Ne(e,i));var s=ai(i);if(t=t.ch,!s)return o(t);var d=Ji(s,t),d=r(t,d);return null!=_l&&(d.other=r(t,_l)),d}function Ue(e,t){var a=0;t=re(e.doc,t),e.options.lineWrapping||(a=Je(e.display)*t.ch);var i=Ya(e.doc,t.line),n=ti(i)+e.display.lineSpace.offsetTop;return{left:a,right:a,top:n,bottom:n+i.height}}function Ge(e,t,a,i){return e=Tn(e,t),e.xRel=i,a&&(e.outside=!0),e}function $e(e,t,a){var i=e.doc;if(a+=e.display.viewOffset,0>a)return Ge(i.first,0,!0,-1);var n=ei(i,a),l=i.first+i.size-1;if(n>l)return Ge(i.first+i.size-1,Ya(i,l).text.length,!0,1);for(0>t&&(t=0),i=Ya(i,n);;){if(n=Ye(e,i,n,t,a),l=(i=ya(i,!1))&&i.find(0,!0),!i||!(n.ch>l.from.ch||n.ch==l.from.ch&&0<n.xRel))return n;n=Xa(i=l.to.line)}}function Ye(e,t,a,i,n){function l(i){return i=We(e,Tn(a,i),"line",t,d),r=!0,o>i.bottom?i.left-s:o<i.top?i.left+s:(r=!1,i.left)}var o=n-ti(t),r=!1,s=2*e.display.wrapper.clientWidth,d=Ne(e,t),c=ai(t),u=t.text.length;n=Gi(t);var m=$i(t),p=l(n),g=r,h=l(m),b=r;if(i>h)return Ge(a,m,b,1);for(;;){if(c?m==n||m==Xi(t,n,1):1>=m-n){for(c=i<p||i-p<=h-i?n:m,i-=c==n?p:h;zi(t.text.charAt(c));)++c;return Ge(a,c,c==n?g:b,-1>i?-1:1<i?1:0)}var v=Math.ceil(u/2),f=n+v;if(c)for(var f=n,k=0;k<v;++k)f=Xi(t,f,1);k=l(f),k>i?(m=f,h=k,(b=r)&&(h+=1e3),u=v):(n=f,p=k,g=r,u-=v)}}function Ze(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ln){Ln=Pi("pre");for(var t=0;49>t;++t)Ln.appendChild(document.createTextNode("x")),Ln.appendChild(Pi("br"));Ln.appendChild(document.createTextNode("x"))}return Oi(e.measure,Ln),t=Ln.offsetHeight/50,3<t&&(e.cachedTextHeight=t),Ni(e.measure),t||1}function Je(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Pi("span","xxxxxxxxxx"),a=Pi("pre",[t]);return Oi(e.measure,a),t=t.getBoundingClientRect(),t=(t.right-t.left)/10,2<t&&(e.cachedCharWidth=t),t||10}function Qe(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++In},Rn?Rn.ops.push(e.curOp):e.curOp.ownsGroup=Rn={ops:[e.curOp],delayedCallbacks:[]}}function Xe(e){if(e=e.curOp.ownsGroup)try{var t=e.delayedCallbacks,a=0;do{for(;a<t.length;a++)t[a]();for(var i=0;i<e.ops.length;i++){var n=e.ops[i];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++](n.cm)}}while(a<t.length)}finally{for(Rn=null,t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;for(e=e.ops,t=0;t<e.length;t++){var n=e[t],a=n.cm,l=i=a.display;!l.scrollbarsClipped&&l.scroller.offsetWidth&&(l.nativeBarWidth=l.scroller.offsetWidth-l.scroller.clientWidth,l.heightForcer.style.height=Ie(a)+"px",l.sizer.style.marginBottom=-l.nativeBarWidth+"px",l.sizer.style.borderRightWidth=Ie(a)+"px",l.scrollbarsClipped=!0),n.updateMaxLine&&u(a),n.mustUpdate=n.viewChanged||n.forceUpdate||null!=n.scrollTop||n.scrollToPos&&(n.scrollToPos.from.line<i.viewFrom||n.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&a.options.lineWrapping,n.update=n.mustUpdate&&new w(a,n.mustUpdate&&{top:n.scrollTop,ensure:n.scrollToPos},n.forceUpdate)}for(t=0;t<e.length;t++)n=e[t],n.updatedDisplay=n.mustUpdate&&A(n.cm,n.update);for(t=0;t<e.length;t++)n=e[t],a=n.cm,i=a.display,n.updatedDisplay&&D(a),n.barMeasure=p(a),i.maxLineChanged&&!a.options.lineWrapping&&(l=void 0,l=i.maxLine.text.length,l=Oe(a,Ne(a,i.maxLine),l,void 0),n.adjustWidthTo=l.left+3,a.display.sizerWidth=n.adjustWidthTo,n.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+n.adjustWidthTo+Ie(a)+a.display.barWidth),n.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+n.adjustWidthTo-Be(a))),(n.updatedDisplay||n.selectionChanged)&&(n.preparedSelection=i.input.prepareSelection());for(t=0;t<e.length;t++)n=e[t],a=n.cm,null!=n.adjustWidthTo&&(a.display.sizer.style.minWidth=n.adjustWidthTo+"px",n.maxScrollLeft<a.doc.scrollLeft&&Tt(a,Math.min(a.display.scroller.scrollLeft,n.maxScrollLeft),!0),a.display.maxLineChanged=!1),n.preparedSelection&&a.display.input.showSelection(n.preparedSelection),n.updatedDisplay&&F(a,n.barMeasure),(n.updatedDisplay||n.startHeight!=a.doc.height)&&v(a,n.barMeasure),n.selectionChanged&&we(a),a.state.focused&&n.updateInput&&a.display.input.reset(n.typing),n.focus&&n.focus==ji()&&q(n.cm);for(t=0;t<e.length;t++){if(n=e[t],a=n.cm,i=a.display,l=a.doc,n.updatedDisplay&&L(a,n.update),null==i.wheelStartX||null==n.scrollTop&&null==n.scrollLeft&&!n.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null==n.scrollTop||i.scroller.scrollTop==n.scrollTop&&!n.forceScroll||(l.scrollTop=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,n.scrollTop)),i.scrollbars.setScrollTop(l.scrollTop),i.scroller.scrollTop=l.scrollTop),null==n.scrollLeft||i.scroller.scrollLeft==n.scrollLeft&&!n.forceScroll||(l.scrollLeft=Math.max(0,Math.min(i.scroller.scrollWidth-Be(a),n.scrollLeft)),i.scrollbars.setScrollLeft(l.scrollLeft),i.scroller.scrollLeft=l.scrollLeft,y(a)),n.scrollToPos){var o=void 0,r=re(l,n.scrollToPos.from),o=re(l,n.scrollToPos.to),s=n.scrollToPos.margin;null==s&&(s=0);for(var d=0;5>d;d++){var c=!1,m=We(a,r),g=o&&o!=r?We(a,o):m,g=Yt(a,Math.min(m.left,g.left),Math.min(m.top,g.top)-s,Math.max(m.left,g.left),Math.max(m.bottom,g.bottom)+s),h=a.doc.scrollTop,b=a.doc.scrollLeft;if(null!=g.scrollTop&&(Ct(a,g.scrollTop),1<Math.abs(a.doc.scrollTop-h)&&(c=!0)),null!=g.scrollLeft&&(Tt(a,g.scrollLeft),1<Math.abs(a.doc.scrollLeft-b)&&(c=!0)),!c)break}o=m,n.scrollToPos.isCursor&&a.state.focused&&(fi(a,"scrollCursorIntoView")||(s=a.display,d=s.sizer.getBoundingClientRect(),r=null,0>o.top+d.top?r=!0:o.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null==r||pn||(o=Pi("div","\u200b",null,"position: absolute; top: "+(o.top-s.viewOffset-a.display.lineSpace.offsetTop)+"px; height: "+(o.bottom-o.top+Ie(a)+s.barHeight)+"px; left: "+o.left+"px; width: 2px;"),a.display.lineSpace.appendChild(o),o.scrollIntoView(r),a.display.lineSpace.removeChild(o))))}if(r=n.maybeHiddenMarkers,o=n.maybeUnhiddenMarkers,r)for(s=0;s<r.length;++s)r[s].lines.length||vl(r[s],"hide");if(o)for(s=0;s<o.length;++s)o[s].lines.length&&vl(o[s],"unhide");i.wrapper.offsetHeight&&(l.scrollTop=a.display.scroller.scrollTop),n.changeObjs&&vl(a,"changes",a,n.changeObjs),n.update&&n.update.finish()}}}function et(e,t){if(e.curOp)return t();Qe(e);try{return t()}finally{Xe(e)}}function tt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Qe(e);try{return t.apply(e,arguments)}finally{Xe(e)}}}function at(e){return function(){if(this.curOp)return e.apply(this,arguments);Qe(this);try{return e.apply(this,arguments)}finally{Xe(this)}}}function it(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Qe(t);try{return e.apply(this,arguments)}finally{Xe(t)}}}function nt(e,t,a){for(var i,n=this.line=t;n=ya(n,!1);)n=n.find(1,!0).line,(i||(i=[])).push(n);this.size=(this.rest=i)?Xa(Ai(this.rest))-a+1:1,this.node=this.text=null,this.hidden=Aa(e,t)}function lt(e,t,a){var i,n=[];for(i=t;i<a;)t=new nt(e.doc,Ya(e.doc,i),i),i+=t.size,n.push(t);return n}function ot(e,t,a,i){null==t&&(t=e.doc.first),null==a&&(a=e.doc.first+e.doc.size),i||(i=0);var n=e.display;if(i&&a<n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)Cn&&Ta(e.doc,t)<n.viewTo&&st(e);else if(a<=n.viewFrom)Cn&&wa(e.doc,a+i)>n.viewFrom?st(e):(n.viewFrom+=i,n.viewTo+=i);else if(t<=n.viewFrom&&a>=n.viewTo)st(e);else if(t<=n.viewFrom){var l=ct(e,a,a+i,1);l?(n.view=n.view.slice(l.index),n.viewFrom=l.lineN,n.viewTo+=i):st(e)}else if(a>=n.viewTo)(l=ct(e,t,t,-1))?(n.view=n.view.slice(0,l.index),n.viewTo=l.lineN):st(e);else{var l=ct(e,t,t,-1),o=ct(e,a,a+i,1);l&&o?(n.view=n.view.slice(0,l.index).concat(lt(e,l.lineN,o.lineN)).concat(n.view.slice(o.index)),n.viewTo+=i):st(e)}(e=n.externalMeasured)&&(a<e.lineN?e.lineN+=i:t<e.lineN+e.size&&(n.externalMeasured=null))}function rt(e,t,a){e.curOp.viewChanged=!0;var i=e.display,n=e.display.externalMeasured;n&&t>=n.lineN&&t<n.lineN+n.size&&(i.externalMeasured=null),t<i.viewFrom||t>=i.viewTo||(e=i.view[dt(e,t)],null!=e.node&&(e=e.changes||(e.changes=[]),-1==Li(e,a)&&e.push(a)))}function st(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function dt(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var a=e.display.view,i=0;i<a.length;i++)if(t-=a[i].size,0>t)return i}function ct(e,t,a,i){var n=dt(e,t),l=e.display.view;if(!Cn||a==e.doc.first+e.doc.size)return{index:n,lineN:a};for(var o=0,r=e.display.viewFrom;o<n;o++)r+=l[o].size;if(r!=t){if(0<i){if(n==l.length-1)return null;t=r+l[n].size-t,n++}else t=r-t;a+=t}for(;Ta(e.doc,a)!=a;){if(n==(0>i?0:l.length-1))return null;a+=i*l[n-(0>i?1:0)].size,n+=i}return{index:n,lineN:a}}function ut(e){e=e.display.view;for(var t=0,a=0;a<e.length;a++){var i=e[a];i.hidden||i.node&&!i.changes||++t}return t}function mt(e){function t(){i.activeTouch&&(n=setTimeout(function(){i.activeTouch=null},1e3),l=i.activeTouch,l.end=+new Date)}function a(e,t){if(null==t.left)return!0;var a=t.left-e.left,i=t.top-e.top;return 400<a*a+i*i}var i=e.display;hl(i.scroller,"mousedown",tt(e,bt)),ln&&11>on?hl(i.scroller,"dblclick",tt(e,function(t){if(!fi(e,t)){var a=ht(e,t);!a||yt(e,t,"gutterClick",!0,bi)||gt(e.display,t)||(ml(t),t=e.findWordAt(a),ce(e.doc,t.anchor,t.head))}})):hl(i.scroller,"dblclick",function(t){fi(e,t)||ml(t)}),yn||hl(i.scroller,"contextmenu",function(t){Ot(e,t)});var n,l={end:0};hl(i.scroller,"touchstart",function(e){var t;1!=e.touches.length?t=!1:(t=e.touches[0],t=1>=t.radiusX&&1>=t.radiusY),t||(clearTimeout(n),t=+new Date,i.activeTouch={start:t,moved:!1,prev:300>=t-l.end?l:null},1==e.touches.length&&(i.activeTouch.left=e.touches[0].pageX,i.activeTouch.top=e.touches[0].pageY))}),hl(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),hl(i.scroller,"touchend",function(n){var l=i.activeTouch;if(l&&!gt(i,n)&&null!=l.left&&!l.moved&&300>new Date-l.start){var o=e.coordsChar(i.activeTouch,"page"),l=!l.prev||a(l,l.prev)?new ne(o,o):!l.prev.prev||a(l,l.prev.prev)?e.findWordAt(o):new ne(Tn(o.line,0),re(e.doc,Tn(o.line+1,0)));e.setSelection(l.anchor,l.head),e.focus(),ml(n)}t()}),hl(i.scroller,"touchcancel",t),hl(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Ct(e,i.scroller.scrollTop),Tt(e,i.scroller.scrollLeft,!0),vl(e,"scroll",e))}),hl(i.scroller,"mousewheel",function(t){wt(e,t)}),hl(i.scroller,"DOMMouseScroll",function(t){wt(e,t)}),hl(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={simple:function(t){fi(e,t)||gl(t)},start:function(t){if(ln&&(!e.state.draggingText||100>+new Date-Bn))gl(t);else if(!fi(e,t)&&!gt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!un)){var a=Pi("img",null,null,"position: fixed; left: 0; top: 0;");a.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",cn&&(a.width=a.height=1,e.display.wrapper.appendChild(a),a._top=a.offsetTop),t.dataTransfer.setDragImage(a,0,0),cn&&a.parentNode.removeChild(a)}},drop:tt(e,St)};var o=i.input.getField();hl(o,"keyup",function(t){Bt.call(e,t)}),hl(o,"keydown",tt(e,Rt)),hl(o,"keypress",tt(e,xt)),hl(o,"focus",Ii(Pt,e)),hl(o,"blur",Ii(Nt,e))}function pt(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function gt(e,t){for(var a=t.target||t.srcElement;a!=e.wrapper;a=a.parentNode)if(!a||1==a.nodeType&&"true"==a.getAttribute("cm-ignore-events")||a.parentNode==e.sizer&&a!=e.mover)return!0}function ht(e,t,a,i){var n=e.display;if(!a&&"true"==(t.target||t.srcElement).getAttribute("cm-not-content"))return null;var l,o;a=n.lineSpace.getBoundingClientRect();try{l=t.clientX-a.left,o=t.clientY-a.top}catch(e){return null}t=$e(e,l,o);var r;return i&&1==t.xRel&&(r=Ya(e.doc,t.line).text).length==t.ch&&(i=wl(r,r.length,e.options.tabSize)-r.length,t=Tn(t.line,Math.max(0,Math.round((l-Re(e.display).left)/Je(e.display))-i))),t}function bt(e){var t=this.display;if(!(t.activeTouch&&t.input.supportsTouch()||fi(this,e)))if(t.shift=e.shiftKey,gt(t,e))rn||(t.scroller.draggable=!1,setTimeout(function(){t.scroller.draggable=!0},100));else if(!yt(this,e,"gutterClick",!0,bi)){var a=ht(this,e);switch(window.focus(),hi(e)){case 1:a?vt(this,e,a):(e.target||e.srcElement)==t.scroller&&ml(e);break;case 2:rn&&(this.state.lastMiddleDown=+new Date),a&&ce(this.doc,a),setTimeout(function(){t.input.focus()},20),ml(e);break;case 3:yn?Ot(this,e):zt(this)}}}function vt(e,t,a){ln?setTimeout(Ii(q,e),0):e.curOp.focus=ji();var i,n=+new Date;Fn&&Fn.time>n-400&&0==wn(Fn.pos,a)?i="triple":En&&En.time>n-400&&0==wn(En.pos,a)?(i="double",Fn={time:n,pos:a}):(i="single",En={time:n,pos:a});var l,n=e.doc.sel,o=bn?t.metaKey:t.ctrlKey;e.options.dragDrop&&Ol&&!W(e)&&"single"==i&&-1<(l=n.contains(a))&&!n.ranges[l].empty()?ft(e,t,a,o):kt(e,t,a,i,o)}function ft(e,t,a,i){var n=e.display,l=+new Date,o=tt(e,function(r){rn&&(n.scroller.draggable=!1),e.state.draggingText=!1,bl(document,"mouseup",o),bl(n.scroller,"drop",o),10>Math.abs(t.clientX-r.clientX)+Math.abs(t.clientY-r.clientY)&&(ml(r),!i&&+new Date-200<l&&ce(e.doc,a),rn||ln&&9==on?setTimeout(function(){document.body.focus(),n.input.focus()},20):n.input.focus())});rn&&(n.scroller.draggable=!0),e.state.draggingText=o,n.scroller.dragDrop&&n.scroller.dragDrop(),hl(document,"mouseup",o),hl(n.scroller,"drop",o)}function kt(e,t,a,i,n){function l(t){if(0!=wn(h,t))if(h=t,"rect"==i){for(var n=[],l=e.options.tabSize,o=wl(Ya(d,a.line).text,a.ch,l),r=wl(Ya(d,t.line).text,t.ch,l),s=Math.min(o,r),o=Math.max(o,r),r=Math.min(a.line,t.line),p=Math.min(e.lastLine(),Math.max(a.line,t.line));r<=p;r++){var g=Ya(d,r).text,b=Ti(g,s,l);s==o?n.push(new ne(Tn(r,b),Tn(r,b))):g.length>b&&n.push(new ne(Tn(r,b),Tn(r,Ti(g,o,l))))}n.length||n.push(new ne(a,a)),he(d,le(m.ranges.slice(0,u).concat(n),u),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else n=c,l=n.anchor,s=t,"single"!=i&&(t="double"==i?e.findWordAt(t):new ne(Tn(t.line,0),re(d,Tn(t.line+1,0))),0<wn(t.anchor,l)?(s=t.head,l=_(n.from(),t.anchor)):(s=t.anchor,l=H(n.to(),t.head))),n=m.ranges.slice(0),n[u]=new ne(re(d,l),s),he(d,le(n,u),Cl)}function o(t){var a=++v,n=ht(e,t,!0,"rect"==i);if(n)if(0!=wn(n,h)){e.curOp.focus=ji(),l(n);var r=k(s,d);(n.line>=r.to||n.line<r.from)&&setTimeout(tt(e,function(){v==a&&o(t)}),150)}else{var c=t.clientY<b.top?-20:t.clientY>b.bottom?20:0;c&&setTimeout(tt(e,function(){v==a&&(s.scroller.scrollTop+=c,o(t))}),50)}}function r(e){v=1/0,ml(e),s.input.focus(),bl(document,"mousemove",f),bl(document,"mouseup",y),d.history.lastSelOrigin=null}var s=e.display,d=e.doc;ml(t);var c,u,m=d.sel,p=m.ranges;if(n&&!t.shiftKey?(u=d.sel.contains(a),c=-1<u?p[u]:new ne(a,a)):(c=d.sel.primary(),u=d.sel.primIndex),t.altKey)i="rect",n||(c=new ne(a,a)),a=ht(e,t,!0,!0),u=-1;else if("double"==i){var g=e.findWordAt(a);c=e.display.shift||d.extend?de(d,c,g.anchor,g.head):g}else"triple"==i?(g=new ne(Tn(a.line,0),re(d,Tn(a.line+1,0))),c=e.display.shift||d.extend?de(d,c,g.anchor,g.head):g):c=de(d,c,a);n?-1==u?(u=p.length,he(d,le(p.concat([c]),u),{scroll:!1,origin:"*mouse"})):1<p.length&&p[u].empty()&&"single"==i&&!t.shiftKey?(he(d,le(p.slice(0,u).concat(p.slice(u+1)),0)),m=d.sel):me(d,u,c,Cl):(u=0,he(d,new ie([c],0),Cl),m=d.sel);var h=a,b=s.wrapper.getBoundingClientRect(),v=0,f=tt(e,function(e){hi(e)?o(e):r(e)}),y=tt(e,r);hl(document,"mousemove",f),hl(document,"mouseup",y)}function yt(e,t,a,i,n){try{var l=t.clientX,o=t.clientY}catch(e){return!1}if(l>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&ml(t),i=e.display;var r=i.lineDiv.getBoundingClientRect();if(o>r.bottom||!yi(e,a))return gi(t);for(o-=r.top-i.viewOffset,r=0;r<e.options.gutters.length;++r){var s=i.gutters.childNodes[r];if(s&&s.getBoundingClientRect().right>=l)return l=ei(e.doc,o),n(e,a,e,l,e.options.gutters[r],t),gi(t)}}function St(e){var t=this;if(!fi(t,e)&&!gt(t.display,e)){ml(e),ln&&(Bn=+new Date);var a=ht(t,e,!0),i=e.dataTransfer.files;if(a&&!W(t))if(i&&i.length&&window.FileReader&&window.File){var n=i.length,l=Array(n),o=0;e=function(e,i){var r=new FileReader;r.onload=tt(t,function(){if(l[i]=r.result,++o==n){a=re(t.doc,a);var e={from:a,to:a,text:jl(l.join("\n")),origin:"paste"};Ht(t.doc,e),ge(t.doc,oe(a,jn(e)))}}),r.readAsText(e)};for(var r=0;r<n;++r)e(i[r],r)}else if(t.state.draggingText&&-1<t.doc.sel.contains(a))t.state.draggingText(e),setTimeout(function(){t.display.input.focus()},20);else try{if(l=e.dataTransfer.getData("Text")){if(t.state.draggingText&&(bn?!e.altKey:!e.ctrlKey))var s=t.listSelections();if(be(t.doc,oe(a,a)),s)for(r=0;r<s.length;++r)$t(t.doc,"",s[r].anchor,s[r].head,"drag");t.replaceSelection(l,"around","paste"),t.display.input.focus()}}catch(e){}}}function Ct(e,t){2>Math.abs(e.doc.scrollTop-t)||(e.doc.scrollTop=t,tn||E(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),tn&&E(e),Ae(e,100))}function Tt(e,t,a){(a?t==e.doc.scrollLeft:2>Math.abs(e.doc.scrollLeft-t))||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,y(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function wt(e,t){var a=Pn(t),i=a.x,a=a.y,n=e.display,l=n.scroller;if(i&&l.scrollWidth>l.clientWidth||a&&l.scrollHeight>l.clientHeight){if(a&&bn&&rn){var o=t.target,r=n.view;e:for(;o!=l;o=o.parentNode)for(var s=0;s<r.length;s++)if(r[s].node==o){e.display.currentWheelTarget=o;break e}}!i||tn||cn||null==zn?(a&&null!=zn&&(o=a*zn,r=e.doc.scrollTop,s=r+n.wrapper.clientHeight,0>o?r=Math.max(0,r+o-50):s=Math.min(e.doc.height,s+o+50),E(e,{top:r,bottom:s})),20>xn&&(null==n.wheelStartX?(n.wheelStartX=l.scrollLeft,n.wheelStartY=l.scrollTop,n.wheelDX=i,n.wheelDY=a,setTimeout(function(){if(null!=n.wheelStartX){var e=l.scrollLeft-n.wheelStartX,t=l.scrollTop-n.wheelStartY,e=t&&n.wheelDY&&t/n.wheelDY||e&&n.wheelDX&&e/n.wheelDX;n.wheelStartX=n.wheelStartY=null,e&&(zn=(zn*xn+e)/(xn+1),++xn)}},200)):(n.wheelDX+=i,n.wheelDY+=a))):(a&&Ct(e,Math.max(0,Math.min(l.scrollTop+a*zn,l.scrollHeight-l.clientHeight))),Tt(e,Math.max(0,Math.min(l.scrollLeft+i*zn,l.scrollWidth-l.clientWidth))),ml(t),n.wheelStartX=null)}}function At(e,t,a){if("string"==typeof t&&(t=Yn[t],!t))return!1;e.display.input.ensurePolled();var i=e.display.shift,n=!1;try{W(e)&&(e.state.suppressEdits=!0),a&&(e.display.shift=!1),n=t(e)!=yl}finally{e.display.shift=i,e.state.suppressEdits=!1}return n}function Lt(e,t,a){for(var i=0;i<e.state.keyMaps.length;i++){var n=Jn(t,e.state.keyMaps[i],a,e);if(n)return n}return e.options.extraKeys&&Jn(t,e.options.extraKeys,a,e)||Jn(t,e.options.keyMap,a,e)}function Et(e,t,a,i){var n=e.state.keySeq;if(n){if(Qn(t))return"handled";Nn.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),t=n+" "+t}return i=Lt(e,t,i),"multi"==i&&(e.state.keySeq=t),"handled"==i&&bi(e,"keyHandled",e,t,a),"handled"!=i&&"multi"!=i||(ml(a),we(e)),n&&!i&&/\'$/.test(t)?(ml(a),!0):!!i}function Ft(e,t){var a=Xn(t,!0);return!!a&&(t.shiftKey&&!e.state.keySeq?Et(e,"Shift-"+a,t,function(t){return At(e,t,!0)})||Et(e,a,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return At(e,t)}):Et(e,a,t,function(t){return At(e,t)}))}function Dt(e,t,a){return Et(e,"'"+a+"'",t,function(t){return At(e,t,!0)})}function Rt(e){if(this.curOp.focus=ji(),!fi(this,e)){ln&&11>on&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var a=Ft(this,e);cn&&(On=a?t:null,!a&&88==t&&!Vl&&(bn?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||It(this)}}function It(e){function t(e){18!=e.keyCode&&e.altKey||(zl(a,"CodeMirror-crosshair"),bl(document,"keyup",t),bl(document,"mouseover",t))}var a=e.display.lineDiv;Pl(a,"CodeMirror-crosshair"),hl(document,"keyup",t),hl(document,"mouseover",t)}function Bt(e){16==e.keyCode&&(this.doc.sel.shift=!1),fi(this,e)}function xt(e){if(!(gt(this.display,e)||fi(this,e)||e.ctrlKey&&!e.altKey||bn&&e.metaKey)){var t=e.keyCode,a=e.charCode;cn&&t==On?(On=null,ml(e)):cn&&(!e.which||10>e.which)&&Ft(this,e)||(t=String.fromCharCode(null==a?t:a),Dt(this,e,t)||this.display.input.onKeyPress(e))}}function zt(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Nt(e))},100)}function Pt(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(vl(e,"focus",e),e.state.focused=!0,Pl(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),rn&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),we(e))}function Nt(e){e.state.delayingBlurEvent||(e.state.focused&&(vl(e,"blur",e),e.state.focused=!1,zl(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Ot(e,t){var a;(a=gt(e.display,t))||(a=!!yi(e,"gutterContextMenu")&&yt(e,t,"gutterContextMenu",!1,vl)),a||e.display.input.onContextMenu(t)}function jt(e,t){if(0>wn(e,t.from))return e;if(0>=wn(e,t.to))return jn(t);var a=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=jn(t).ch-t.to.ch),Tn(a,i)}function Mt(e,t){for(var a=[],i=0;i<e.sel.ranges.length;i++){var n=e.sel.ranges[i];a.push(new ne(jt(n.anchor,t),jt(n.head,t)))}return le(a,e.sel.primIndex)}function Vt(e,t,a){return e.line==t.line?Tn(a.line,e.ch-t.ch+a.ch):Tn(a.line+(e.line-t.line),e.ch)}function Kt(e,t,a){return t={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}},a&&(t.update=function(t,a,i,n){t&&(this.from=re(e,t)),a&&(this.to=re(e,a)),i&&(this.text=i),void 0!==n&&(this.origin=n)}),vl(e,"beforeChange",e,t),e.cm&&vl(e.cm,"beforeChange",e.cm,t),t.canceled?null:{from:t.from,to:t.to,text:t.text,origin:t.origin}}function Ht(e,t,a){if(e.cm){if(!e.cm.curOp)return tt(e.cm,Ht)(e,t,a);if(e.cm.state.suppressEdits)return}if(!(yi(e,"beforeChange")||e.cm&&yi(e.cm,"beforeChange"))||(t=Kt(e,t,!0)))if(a=Sn&&!a&&ba(e,t.from,t.to))for(var i=a.length-1;0<=i;--i)_t(e,{from:a[i].from,to:a[i].to,text:i?[""]:t.text});else _t(e,t)}function _t(e,t){if(1!=t.text.length||""!=t.text[0]||0!=wn(t.from,t.to)){var a=Mt(e,t);oi(e,t,a,e.cm?e.cm.curOp.id:NaN),Ut(e,t,a,pa(e,t));var i=[];Ga(e,function(e,a){a||-1!=Li(i,e.history)||(pi(e.history,t),i.push(e.history)),Ut(e,t,null,pa(e,t))})}}function qt(e,t,a){if(!e.cm||!e.cm.state.suppressEdits){for(var i,n=e.history,l=e.sel,o="undo"==t?n.done:n.undone,r="undo"==t?n.undone:n.done,s=0;s<o.length&&(i=o[s],a?!i.ranges||i.equals(e.sel):i.ranges);s++);if(s!=o.length){for(n.lastOrigin=n.lastSelOrigin=null;i=o.pop(),i.ranges;){if(ri(i,r),a&&!i.equals(e.sel))return void he(e,i,{clearRedo:!1});l=i}for(a=[],ri(l,r),r.push({changes:a,generation:n.generation}),n.generation=i.generation||++n.maxGeneration,n=yi(e,"beforeChange")||e.cm&&yi(e.cm,"beforeChange"),s=i.changes.length-1;0<=s;--s){var d=i.changes[s];if(d.origin=t,n&&!Kt(e,d,!1)){o.length=0;break}a.push(ni(e,d)),l=s?Mt(e,d):Ai(o),Ut(e,d,l,ha(e,d)),!s&&e.cm&&e.cm.scrollIntoView({from:d.from,to:jn(d)});var c=[];Ga(e,function(e,t){t||-1!=Li(c,e.history)||(pi(e.history,d),c.push(e.history)),Ut(e,d,null,ha(e,d))})}}}}function Wt(e,t){if(0!=t&&(e.first+=t,e.sel=new ie(Ei(e.sel.ranges,function(e){return new ne(Tn(e.anchor.line+t,e.anchor.ch),Tn(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){ot(e.cm,e.first,e.first-t,t);for(var a=e.cm.display,i=a.viewFrom;i<a.viewTo;i++)rt(e.cm,i,"gutter")}}function Ut(e,t,a,i){if(e.cm&&!e.cm.curOp)return tt(e.cm,Ut)(e,t,a,i);if(t.to.line<e.first)Wt(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);Wt(e,n),t={from:Tn(e.first,0),to:Tn(t.to.line+n,t.to.ch),text:[Ai(t.text)],origin:t.origin}}n=e.lastLine(),t.to.line>n&&(t={from:t.from,to:Tn(n,Ya(e,n).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Za(e,t.from,t.to),a||(a=Mt(e,t)),e.cm?Gt(e.cm,t,i):qa(e,t,i),be(e,a,Sl)}}function Gt(e,t,a){var i=e.doc,l=e.display,o=t.from,r=t.to,s=!1,d=o.line;e.options.lineWrapping||(d=Xa(Ca(Ya(i,o.line))),i.iter(d,r.line+1,function(e){if(e==l.maxLine)return s=!0})),-1<i.sel.contains(t.from,t.to)&&ki(e),qa(i,t,a,n(e)),e.options.lineWrapping||(i.iter(d,o.line+t.text.length,function(e){var t=c(e);t>l.maxLineLength&&(l.maxLine=e,l.maxLineLength=t,l.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,o.line),Ae(e,400),a=t.text.length-(r.line-o.line)-1,t.full?ot(e):o.line!=r.line||1!=t.text.length||_a(e.doc,t)?ot(e,o.line,r.line+1,a):rt(e,o.line,"text"),a=yi(e,"changes"),((i=yi(e,"change"))||a)&&(t={from:o,to:r,text:t.text,removed:t.removed,origin:t.origin},i&&bi(e,"change",e,t),a&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(t)),e.display.selForContextMenu=null}function $t(e,t,a,i,n){if(i||(i=a),0>wn(i,a)){var l=i;i=a,a=l}"string"==typeof t&&(t=jl(t)),Ht(e,{from:a,to:i,text:t,origin:n})}function Yt(e,t,a,i,n){var l=e.display,o=Ze(e.display);0>a&&(a=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:l.scroller.scrollTop,s=xe(e),d={};n-a>s&&(n=a+s);var c=e.doc.height+De(l),u=a<o,o=n>c-o;return a<r?d.scrollTop=u?0:a:n>r+s&&(a=Math.min(a,(o?c:n)-s),a!=r&&(d.scrollTop=a)),r=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:l.scroller.scrollLeft,e=Be(e)-(e.options.fixedGutter?l.gutters.offsetWidth:0),(l=i-t>e)&&(i=t+e),10>t?d.scrollLeft=0:t<r?d.scrollLeft=Math.max(0,t-(l?0:10)):i>e+r-3&&(d.scrollLeft=i+(l?0:10)-e),d}function Zt(e,t,a){null==t&&null==a||Qt(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=a&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+a)}function Jt(e){Qt(e);var t=e.getCursor(),a=t,i=t;e.options.lineWrapping||(a=t.ch?Tn(t.line,t.ch-1):t,i=Tn(t.line,t.ch+1)),e.curOp.scrollToPos={from:a,to:i,margin:e.options.cursorScrollMargin,isCursor:!0}}function Qt(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var a=Ue(e,t.from),i=Ue(e,t.to),t=Yt(e,Math.min(a.left,i.left),Math.min(a.top,i.top)-t.margin,Math.max(a.right,i.right),Math.max(a.bottom,i.bottom)+t.margin);e.scrollTo(t.scrollLeft,t.scrollTop)}}function Xt(e,t,a,i){var n,l=e.doc;null==a&&(a="add"),"smart"==a&&(l.mode.indent?n=Fe(e,t):a="prev");var o=e.options.tabSize,r=Ya(l,t),s=wl(r.text,null,o);r.stateAfter&&(r.stateAfter=null);var d,c=r.text.match(/^\s*/)[0];if(i||/\S/.test(r.text)){if("smart"==a&&(d=l.mode.indent(n,r.text.slice(c.length),r.text),d==yl||150<d)){if(!i)return;a="prev"}}else d=0,a="not";if("prev"==a?d=t>l.first?wl(Ya(l,t-1).text,null,o):0:"add"==a?d=s+e.options.indentUnit:"subtract"==a?d=s-e.options.indentUnit:"number"==typeof a&&(d=s+a),d=Math.max(0,d),a="",i=0,e.options.indentWithTabs)for(e=Math.floor(d/o);e;--e)i+=o,a+="\t";if(i<d&&(a+=wi(d-i)),a!=c)return $t(l,a,Tn(t,0),Tn(t,c.length),"+input"),r.stateAfter=null,!0;for(e=0;e<l.sel.ranges.length;e++)if(o=l.sel.ranges[e],o.head.line==t&&o.head.ch<c.length){i=Tn(t,c.length),me(l,e,new ne(i,i));break}}function ea(e,t,a,i){var n=t,l=t;return"number"==typeof t?l=Ya(e,Math.max(e.first,Math.min(t,e.first+e.size-1))):n=Xa(t),null==n?null:(i(l,n)&&e.cm&&rt(e.cm,n,a),l)}function ta(e,t){for(var a=e.doc.sel.ranges,i=[],n=0;n<a.length;n++){for(var l=t(a[n]);i.length&&0>=wn(l.from,Ai(i).to);){var o=i.pop();if(0>wn(o.from,l.from)){l.from=o.from;break}}i.push(l)}et(e,function(){for(var t=i.length-1;0<=t;t--)$t(e.doc,"",i[t].from,i[t].to,"+delete");Jt(e)})}function aa(e,t,a,i,n){function l(t){var i=(n?Xi:en)(d,r,a,!0);if(null==i){if((t=!t)&&(t=o+a,t<e.first||t>=e.first+e.size?t=c=!1:(o=t,t=d=Ya(e,t))),!t)return c=!1;r=n?(0>a?$i:Gi)(d):0>a?d.text.length:0}else r=i;return!0}var o=t.line,r=t.ch,s=a,d=Ya(e,o),c=!0;if("char"==i)l();else if("column"==i)l(!0);else if("word"==i||"group"==i){var u=null;i="group"==i,t=e.cm&&e.cm.getHelper(t,"wordChars");for(var m=!0;!(0>a)||l(!m);m=!1){var p=d.text.charAt(r)||"\n",p=Bi(p,t)?"w":i&&"\n"==p?"n":!i||/\s/.test(p)?null:"p";if(!i||m||p||(p="s"),u&&u!=p){0>a&&(a=1,l());break}if(p&&(u=p),0<a&&!l(!m))break}}return s=ye(e,Tn(o,r),s,!0),c||(s.hitSide=!0),s}function ia(e,t,a,i){var n,l=e.doc,o=t.left;for("page"==i?(n=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),n=t.top+a*(n-(0>a?1.5:.5)*Ze(e.display))):"line"==i&&(n=0<a?t.bottom+3:t.top-3);t=$e(e,o,n),t.outside;){if(0>a?0>=n:n>=l.height){t.hitSide=!0;break}n+=5*a}return t}function na(t,a,i,n){e.defaults[t]=a,i&&(Vn[t]=n?function(e,t,a){a!=Kn&&i(e,t,a)}:i)}function la(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var a,i,n,l,o=0;o<t.length-1;o++){var r=t[o];if(/^(cmd|meta|m)$/i.test(r))l=!0;else if(/^a(lt)?$/i.test(r))a=!0;else if(/^(c|ctrl|control)$/i.test(r))i=!0;else{if(!/^s(hift)$/i.test(r))throw Error("Unrecognized modifier name: "+r);n=!0}}return a&&(e="Alt-"+e),i&&(e="Ctrl-"+e),l&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function oa(e){return"string"==typeof e?Zn[e]:e}function ra(e,t,a,i,n){if(i&&i.shared)return sa(e,t,a,i,n);if(e.cm&&!e.cm.curOp)return tt(e.cm,ra)(e,t,a,i,n);var l=new al(e,n);if(n=wn(t,a),i&&Ri(i,l,!1),0<n||0==n&&!1!==l.clearWhenEmpty)return l;if(l.replacedWith&&(l.collapsed=!0,l.widgetNode=Pi("span",[l.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||l.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(l.widgetNode.insertLeft=!0)),l.collapsed){if(Sa(e,t.line,t,a,l)||t.line!=a.line&&Sa(e,a.line,t,a,l))throw Error("Inserting collapsed marker partially overlapping an existing one");Cn=!0}l.addToHistory&&oi(e,{from:t,to:a,origin:"markText"},e.sel,NaN);var o,r=t.line,s=e.cm;if(e.iter(r,a.line+1,function(e){s&&l.collapsed&&!s.options.lineWrapping&&Ca(e)==s.display.maxLine&&(o=!0),l.collapsed&&r!=t.line&&Qa(e,0);var i=new ua(l,r==t.line?t.ch:null,r==a.line?a.ch:null);e.markedSpans=e.markedSpans?e.markedSpans.concat([i]):[i],i.marker.attachLine(e),++r}),l.collapsed&&e.iter(t.line,a.line+1,function(t){Aa(e,t)&&Qa(t,0)}),l.clearOnEnter&&hl(l,"beforeCursorEnter",function(){l.clear()}),l.readOnly&&(Sn=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),l.collapsed&&(l.id=++tl,l.atomic=!0),s){if(o&&(s.curOp.updateMaxLine=!0),l.collapsed)ot(s,t.line,a.line+1);else if(l.className||l.title||l.startStyle||l.endStyle||l.css)for(i=t.line;i<=a.line;i++)rt(s,i,"text");l.atomic&&fe(s.doc),bi(s,"markerAdded",s,l)}return l}function sa(e,t,a,i,n){i=Ri(i),i.shared=!1;var l=[ra(e,t,a,i,n)],o=l[0],r=i.widgetNode;return Ga(e,function(e){r&&(i.widgetNode=r.cloneNode(!0)),l.push(ra(e,re(e,t),re(e,a),i,n));for(var s=0;s<e.linked.length;++s)if(e.linked[s].isParent)return;o=Ai(l)}),new il(l,o)}function da(e){return e.findMarks(Tn(e.first,0),e.clipPos(Tn(e.lastLine())),function(e){return e.parent})}function ca(e){for(var t=0;t<e.length;t++){var a=e[t],i=[a.primary.doc];Ga(a.primary.doc,function(e){i.push(e)});for(var n=0;n<a.markers.length;n++){var l=a.markers[n];-1==Li(i,l.doc)&&(l.parent=null,a.markers.splice(n--,1))}}}function ua(e,t,a){this.marker=e,this.from=t,this.to=a}function ma(e,t){if(e)for(var a=0;a<e.length;++a){var i=e[a];if(i.marker==t)return i}}function pa(e,t){
if(t.full)return null;var a=se(e,t.from.line)&&Ya(e,t.from.line).markedSpans,i=se(e,t.to.line)&&Ya(e,t.to.line).markedSpans;if(!a&&!i)return null;var n=t.from.ch,l=t.to.ch,o=0==wn(t.from,t.to);if(a)for(var r,s=0;s<a.length;++s){var d=a[s],c=d.marker;if(null==d.from||(c.inclusiveLeft?d.from<=n:d.from<n)||!(d.from!=n||"bookmark"!=c.type||o&&d.marker.insertLeft)){var u=null==d.to||(c.inclusiveRight?d.to>=n:d.to>n);(r||(r=[])).push(new ua(c,d.from,u?null:d.to))}}if(a=r,i)for(var m,s=0;s<i.length;++s)r=i[s],d=r.marker,(null==r.to||(d.inclusiveRight?r.to>=l:r.to>l)||r.from==l&&"bookmark"==d.type&&(!o||r.marker.insertLeft))&&(c=null==r.from||(d.inclusiveLeft?r.from<=l:r.from<l),(m||(m=[])).push(new ua(d,c?null:r.from-l,null==r.to?null:r.to-l)));if(i=m,o=1==t.text.length,m=Ai(t.text).length+(o?n:0),a)for(l=0;l<a.length;++l)s=a[l],null==s.to&&((r=ma(i,s.marker))?o&&(s.to=null==r.to?null:r.to+m):s.to=n);if(i)for(l=0;l<i.length;++l)s=i[l],null!=s.to&&(s.to+=m),null==s.from?(r=ma(a,s.marker),r||(s.from=m,o&&(a||(a=[])).push(s))):(s.from+=m,o&&(a||(a=[])).push(s));if(a&&(a=ga(a)),i&&i!=a&&(i=ga(i)),n=[a],!o){var p,o=t.text.length-2;if(0<o&&a)for(l=0;l<a.length;++l)null==a[l].to&&(p||(p=[])).push(new ua(a[l].marker,null,null));for(l=0;l<o;++l)n.push(p);n.push(i)}return n}function ga(e){for(var t=0;t<e.length;++t){var a=e[t];null!=a.from&&a.from==a.to&&!1!==a.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function ha(e,t){var a;if(a=t["spans_"+e.id]){for(var i=0,n=[];i<t.text.length;++i)n.push(di(a[i]));a=n}else a=null;if(i=pa(e,t),!a)return i;if(!i)return a;for(n=0;n<a.length;++n){var l=a[n],o=i[n];if(l&&o){var r=0;e:for(;r<o.length;++r){for(var s=o[r],d=0;d<l.length;++d)if(l[d].marker==s.marker)continue e;l.push(s)}}else o&&(a[n]=o)}return a}function ba(e,t,a){var i=null;if(e.iter(t.line,a.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var a=e.markedSpans[t].marker;!a.readOnly||i&&-1!=Li(i,a)||(i||(i=[])).push(a)}}),!i)return null;for(e=[{from:t,to:a}],t=0;t<i.length;++t){a=i[t];for(var n=a.find(0),l=0;l<e.length;++l){var o=e[l];if(!(0>wn(o.to,n.from)||0<wn(o.from,n.to))){var r=[l,1],s=wn(o.from,n.from),d=wn(o.to,n.to);(0>s||!a.inclusiveLeft&&!s)&&r.push({from:o.from,to:n.from}),(0<d||!a.inclusiveRight&&!d)&&r.push({from:n.to,to:o.to}),e.splice.apply(e,r),l+=r.length-1}}}return e}function va(e){var t=e.markedSpans;if(t){for(var a=0;a<t.length;++a)t[a].marker.detachLine(e);e.markedSpans=null}}function fa(e,t){if(t){for(var a=0;a<t.length;++a)t[a].marker.attachLine(e);e.markedSpans=t}}function ka(e,t){var a=e.lines.length-t.lines.length;if(0!=a)return a;var a=e.find(),i=t.find(),n=wn(a.from,i.from)||(e.inclusiveLeft?-1:0)-(t.inclusiveLeft?-1:0);return n?-n:(a=wn(a.to,i.to)||(e.inclusiveRight?1:0)-(t.inclusiveRight?1:0))?a:t.id-e.id}function ya(e,t){var a,i=Cn&&e.markedSpans;if(i)for(var n,l=0;l<i.length;++l)n=i[l],n.marker.collapsed&&null==(t?n.from:n.to)&&(!a||0>ka(a,n.marker))&&(a=n.marker);return a}function Sa(e,t,a,i,n){if(e=Ya(e,t),e=Cn&&e.markedSpans)for(t=0;t<e.length;++t){var l=e[t];if(l.marker.collapsed){var o=l.marker.find(0),r=wn(o.from,a)||(l.marker.inclusiveLeft?-1:0)-(n.inclusiveLeft?-1:0),s=wn(o.to,i)||(l.marker.inclusiveRight?1:0)-(n.inclusiveRight?1:0);if(!(0<=r&&0>=s||0>=r&&0<=s)&&(0>=r&&(0<wn(o.to,a)||l.marker.inclusiveRight&&n.inclusiveLeft)||0<=r&&(0>wn(o.from,i)||l.marker.inclusiveLeft&&n.inclusiveRight)))return!0}}}function Ca(e){for(var t;t=ya(e,!0);)e=t.find(-1,!0).line;return e}function Ta(e,t){var a=Ya(e,t),i=Ca(a);return a==i?t:Xa(i)}function wa(e,t){if(t>e.lastLine())return t;var a,i=Ya(e,t);if(!Aa(e,i))return t;for(;a=ya(i,!1);)i=a.find(1,!0).line;return Xa(i)+1}function Aa(e,t){var a=Cn&&t.markedSpans;if(a)for(var i,n=0;n<a.length;++n)if(i=a[n],i.marker.collapsed&&(null==i.from||!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&La(e,t,i)))return!0}function La(e,t,a){if(null==a.to)return t=a.marker.find(1,!0),La(e,t.line,ma(t.line.markedSpans,a.marker));if(a.marker.inclusiveRight&&a.to==t.text.length)return!0;for(var i,n=0;n<t.markedSpans.length;++n)if(i=t.markedSpans[n],i.marker.collapsed&&!i.marker.widgetNode&&i.from==a.to&&(null==i.to||i.to!=a.from)&&(i.marker.inclusiveLeft||a.marker.inclusiveRight)&&La(e,t,i))return!0}function Ea(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Il(document.body,e.node)){var a="position: relative;";e.coverGutter&&(a+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(a+="width: "+t.display.wrapper.clientWidth+"px;"),Oi(t.display.measure,Pi("div",[e.node],null,a))}return e.height=e.node.offsetHeight}function Fa(e,t,a,i){var n=new nl(e,a,i),l=e.cm;return l&&n.noHScroll&&(l.display.alignWidgets=!0),ea(e,t,"widget",function(t){var a=t.widgets||(t.widgets=[]);return null==n.insertAt?a.push(n):a.splice(Math.min(a.length-1,Math.max(0,n.insertAt)),0,n),n.line=t,l&&!Aa(e,t)&&(a=ti(t)<e.scrollTop,Qa(t,t.height+Ea(n)),a&&Zt(l,null,n.height),l.curOp.forceUpdate=!0),!0}),n}function Da(e,t){if(e)for(;;){var a=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!a)break;e=e.slice(0,a.index)+e.slice(a.index+a[0].length);var i=a[1]?"bgClass":"textClass";null==t[i]?t[i]=a[2]:new RegExp("(?:^|s)"+a[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+a[2])}return e}function Ra(t,a){if(t.blankLine)return t.blankLine(a);if(t.innerMode){var i=e.innerMode(t,a);if(i.mode.blankLine)return i.mode.blankLine(i.state)}}function Ia(t,a,i,n){for(var l=0;10>l;l++){n&&(n[0]=e.innerMode(t,i).mode);var o=t.token(a,i);if(a.pos>a.start)return o}throw Error("Mode "+t.name+" failed to advance stream.")}function Ba(e,t,a,i){function n(e){return{start:u.start,end:u.pos,string:u.current(),type:l||null,state:e?Gn(o.mode,c):c}}var l,o=e.doc,r=o.mode;t=re(o,t);var s,d=Ya(o,t.line),c=Fe(e,t.line,a),u=new el(d.text,e.options.tabSize);for(i&&(s=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,l=Ia(r,u,c),i&&s.push(n(!0));return i?s:n()}function xa(e,t,a,i,n,l,o){var r=a.flattenSpans;null==r&&(r=e.options.flattenSpans);var s,d=0,c=null,u=new el(t,e.options.tabSize),m=e.options.addModeClass&&[null];for(""==t&&Da(Ra(a,i),l);!u.eol();){if(u.pos>e.options.maxHighlightLength?(r=!1,o&&Na(e,t,i,u.pos),u.pos=t.length,s=null):s=Da(Ia(a,u,i,m),l),m){var p=m[0].name;p&&(s="m-"+(s?p+" "+s:p))}if(!r||c!=s){for(;d<u.start;)d=Math.min(u.start,d+5e4),n(d,c);c=s}u.start=u.pos}for(;d<u.pos;)e=Math.min(u.pos,d+5e4),n(e,c),d=e}function za(e,t,a,i){var n=[e.state.modeGen],l={};for(xa(e,t.text,e.doc.mode,a,function(e,t){n.push(e,t)},l,i),a=0;a<e.state.overlays.length;++a){var o=e.state.overlays[a],r=1,s=0;xa(e,t.text,o.mode,!0,function(e,t){for(var a=r;s<e;){var i=n[r];i>e&&n.splice(r,1,e,n[r+1],i),r+=2,s=Math.min(e,i)}if(t)if(o.opaque)n.splice(a,r-a,e,"cm-overlay "+t),r=a+2;else for(;a<r;a+=2)i=n[a+1],n[a+1]=(i?i+" ":"")+"cm-overlay "+t},l)}return{styles:n,classes:l.bgClass||l.textClass?l:null}}function Pa(e,t,a){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=za(e,t,t.stateAfter=Fe(e,Xa(t)));t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),a===e.doc.frontier&&e.doc.frontier++}return t.styles}function Na(e,t,a,i){var n=e.doc.mode,l=new el(t,e.options.tabSize);for(l.start=l.pos=i||0,""==t&&Ra(n,a);!l.eol()&&l.pos<=e.options.maxHighlightLength;)Ia(n,l,a),l.start=l.pos}function Oa(e,t){if(!e||/^\s*$/.test(e))return null;var a=t.addModeClass?rl:ol;return a[e]||(a[e]=e.replace(/\S+/g,"cm-$&"))}function ja(e,t){var a=Pi("span",null,null,rn?"padding-right: .1px":null),a={pre:Pi("pre",[a]),content:a,col:0,pos:0,cm:e,splitSpaces:(ln||rn)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var n,l=i?t.rest[i-1]:t.line;a.pos=0,a.addToken=Ma;var o;if(null!=xl)o=xl;else{o=Oi(e.display.measure,document.createTextNode("A\u062eA"));var r=El(o,0,1).getBoundingClientRect();o=!(!r||r.left==r.right)&&(xl=3>El(o,1,2).getBoundingClientRect().right-r.right)}o&&(n=ai(l))&&(a.addToken=Ka(a.addToken,n)),a.map=[],r=t!=e.display.externalMeasured&&Xa(l);e:{o=a;var r=Pa(e,l,r),s=l.markedSpans,d=l.text,c=0;if(s)for(var u=d.length,m=0,p=1,g="",h=void 0,b=void 0,v=0,f=void 0,k=void 0,y=void 0,S=void 0,C=void 0;;){if(v==m){for(var f=k=y=S=b="",C=null,v=1/0,T=[],w=0;w<s.length;++w){var A=s[w],L=A.marker;"bookmark"==L.type&&A.from==m&&L.widgetNode?T.push(L):A.from<=m&&(null==A.to||A.to>m||L.collapsed&&A.to==m&&A.from==m)?(null!=A.to&&A.to!=m&&v>A.to&&(v=A.to,k=""),L.className&&(f+=" "+L.className),L.css&&(b=L.css),L.startStyle&&A.from==m&&(y+=" "+L.startStyle),L.endStyle&&A.to==v&&(k+=" "+L.endStyle),L.title&&!S&&(S=L.title),L.collapsed&&(!C||0>ka(C.marker,L))&&(C=A)):A.from>m&&v>A.from&&(v=A.from)}if(C&&(C.from||0)==m){if(Ha(o,(null==C.to?u+1:C.to)-m,C.marker,null==C.from),null==C.to)break e;C.to==m&&(C=!1)}if(!C&&T.length)for(w=0;w<T.length;++w)Ha(o,0,T[w])}if(m>=u)break;for(T=Math.min(u,v);;){if(g){if(w=m+g.length,C||(A=w>T?g.slice(0,T-m):g,o.addToken(o,A,h?h+f:f,y,m+A.length==v?k:"",S,b)),w>=T){g=g.slice(T-m),m=T;break}m=w,y=""}g=d.slice(c,c=r[p++]),h=Oa(r[p++],o.cm.options)}}else for(var p=1;p<r.length;p+=2)o.addToken(o,d.slice(c,c=r[p]),Oa(r[p+1],o.cm.options))}l.styleClasses&&(l.styleClasses.bgClass&&(a.bgClass=Vi(l.styleClasses.bgClass,a.bgClass||"")),l.styleClasses.textClass&&(a.textClass=Vi(l.styleClasses.textClass,a.textClass||""))),0==a.map.length&&a.map.push(0,0,a.content.appendChild(_i(e.display.measure))),0==i?(t.measure.map=a.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(a.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return rn&&/\bcm-tab\b/.test(a.content.lastChild.className)&&(a.content.className="cm-tab-wrap-hack"),vl(e,"renderLine",e,t.line,a.pre),a.pre.className&&(a.textClass=Vi(a.pre.className,a.textClass||"")),a}function Ma(e,t,a,i,n,l,o){if(t){var r=e.splitSpaces?t.replace(/ {3,}/g,Va):t,s=e.cm.state.specialChars,d=!1;if(s.test(t))for(var c=document.createDocumentFragment(),u=0;;){s.lastIndex=u;var m=s.exec(t),p=m?m.index-u:t.length-u;if(p){var g=document.createTextNode(r.slice(u,u+p));ln&&9>on?c.appendChild(Pi("span",[g])):c.appendChild(g),e.map.push(e.pos,e.pos+p,g),e.col+=p,e.pos+=p}if(!m)break;u+=p+1,"\t"==m[0]?(g=e.cm.options.tabSize,m=g-e.col%g,g=c.appendChild(Pi("span",wi(m),"cm-tab")),g.setAttribute("role","presentation"),g.setAttribute("cm-text","\t"),e.col+=m):(g=e.cm.options.specialCharPlaceholder(m[0]),g.setAttribute("cm-text",m[0]),ln&&9>on?c.appendChild(Pi("span",[g])):c.appendChild(g),e.col+=1),e.map.push(e.pos,e.pos+1,g),e.pos++}else{e.col+=t.length;var c=document.createTextNode(r);e.map.push(e.pos,e.pos+t.length,c),ln&&9>on&&(d=!0),e.pos+=t.length}if(a||i||n||d||o)return t=a||"",i&&(t+=i),n&&(t+=n),i=Pi("span",[c],t,o),l&&(i.title=l),e.content.appendChild(i);e.content.appendChild(c)}}function Va(e){for(var t=" ",a=0;a<e.length-2;++a)t+=a%2?" ":"\xa0";return t+" "}function Ka(e,t){return function(a,i,n,l,o,r,s){n=n?n+" cm-force-border":"cm-force-border";for(var d=a.pos,c=d+i.length;;){for(var u=0;u<t.length;u++){var m=t[u];if(m.to>d&&m.from<=d)break}if(m.to>=c)return e(a,i,n,l,o,r,s);e(a,i.slice(0,m.to-d),n,l,null,r,s),l=null,i=i.slice(m.to-d),d=m.to}}}function Ha(e,t,a,i){var n=!i&&a.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!i&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",a.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t}function _a(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Ai(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function qa(e,t,a,i){function n(e,a,n){e.text=a,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),va(e),fa(e,n),a=i?i(e):1,a!=e.height&&Qa(e,a),bi(e,"change",e,t)}function l(e,t){for(var n=e,l=[];n<t;++n)l.push(new ll(s[n],a?a[n]:null,i));return l}var o=t.from,r=t.to,s=t.text,d=Ya(e,o.line),c=Ya(e,r.line),u=Ai(s),m=a?a[s.length-1]:null,p=r.line-o.line;if(t.full)e.insert(0,l(0,s.length)),e.remove(s.length,e.size-s.length);else if(_a(e,t)){var g=l(0,s.length-1);n(c,c.text,m),p&&e.remove(o.line,p),g.length&&e.insert(o.line,g)}else d==c?1==s.length?n(d,d.text.slice(0,o.ch)+u+d.text.slice(r.ch),m):(g=l(1,s.length-1),g.push(new ll(u+d.text.slice(r.ch),m,i)),n(d,d.text.slice(0,o.ch)+s[0],a?a[0]:null),e.insert(o.line+1,g)):1==s.length?(n(d,d.text.slice(0,o.ch)+s[0]+c.text.slice(r.ch),a?a[0]:null),e.remove(o.line+1,p)):(n(d,d.text.slice(0,o.ch)+s[0],a?a[0]:null),n(c,u+c.text.slice(r.ch),m),g=l(1,s.length-1),1<p&&e.remove(o.line+1,p-1),e.insert(o.line+1,g));bi(e,"change",e,t)}function Wa(e){this.lines=e,this.parent=null;for(var t=0,a=0;t<e.length;++t)e[t].parent=this,a+=e[t].height;this.height=a}function Ua(e){this.children=e;for(var t=0,a=0,i=0;i<e.length;++i){var n=e[i],t=t+n.chunkSize(),a=a+n.height;n.parent=this}this.size=t,this.height=a,this.parent=null}function Ga(e,t,a){function i(e,n,l){if(e.linked)for(var o=0;o<e.linked.length;++o){var r=e.linked[o];if(r.doc!=n){var s=l&&r.sharedHist;a&&!s||(t(r.doc,s),i(r.doc,e,s))}}}i(e,null,!0)}function $a(e,t){if(t.cm)throw Error("This document is already in use.");e.doc=t,t.cm=e,l(e),a(e),e.options.lineWrapping||u(e),e.options.mode=t.modeOption,ot(e)}function Ya(e,t){if(t-=e.first,0>t||t>=e.size)throw Error("There is no line "+(t+e.first)+" in the document.");for(var a=e;!a.lines;)for(var i=0;;++i){var n=a.children[i],l=n.chunkSize();if(t<l){a=n;break}t-=l}return a.lines[t]}function Za(e,t,a){var i=[],n=t.line;return e.iter(t.line,a.line+1,function(e){e=e.text,n==a.line&&(e=e.slice(0,a.ch)),n==t.line&&(e=e.slice(t.ch)),i.push(e),++n}),i}function Ja(e,t,a){var i=[];return e.iter(t,a,function(e){i.push(e.text)}),i}function Qa(e,t){var a=t-e.height;if(a)for(var i=e;i;i=i.parent)i.height+=a}function Xa(e){if(null==e.parent)return null;var t=e.parent;e=Li(t.lines,e);for(var a=t.parent;a;t=a,a=a.parent)for(var i=0;a.children[i]!=t;++i)e+=a.children[i].chunkSize();return e+t.first}function ei(e,t){var a=e.first;e:do{for(var i=0;i<e.children.length;++i){var n=e.children[i],l=n.height;if(t<l){e=n;continue e}t-=l,a+=n.chunkSize()}return a}while(!e.lines);for(i=0;i<e.lines.length&&(n=e.lines[i].height,!(t<n));++i)t-=n;return a+i}function ti(e){e=Ca(e);for(var t=0,a=e.parent,i=0;i<a.lines.length;++i){var n=a.lines[i];if(n==e)break;t+=n.height}for(e=a.parent;e;a=e,e=a.parent)for(i=0;i<e.children.length&&(n=e.children[i],n!=a);++i)t+=n.height;return t}function ai(e){var t=e.order;return null==t&&(t=e.order=ql(e.text)),t}function ii(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null,this.generation=this.maxGeneration=e||1}function ni(e,t){var a={from:K(t.from),to:jn(t),text:Za(e,t.from,t.to)};return si(e,a,t.from.line,t.to.line+1),Ga(e,function(e){si(e,a,t.from.line,t.to.line+1)},!0),a}function li(e){for(;e.length&&Ai(e).ranges;)e.pop()}function oi(e,t,a,i){var n=e.history;n.undone.length=0;var l,o,r=+new Date;if((o=n.lastOp==i||n.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&n.lastModTime>r-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(n.lastOp==i?(li(n.done),l=Ai(n.done)):n.done.length&&!Ai(n.done).ranges?l=Ai(n.done):1<n.done.length&&!n.done[n.done.length-2].ranges?(n.done.pop(),l=Ai(n.done)):l=void 0,o=l),o){var s=Ai(l.changes);0==wn(t.from,t.to)&&0==wn(t.from,s.to)?s.to=jn(t):l.changes.push(ni(e,t))}else for((l=Ai(n.done))&&l.ranges||ri(e.sel,n.done),l={changes:[ni(e,t)],generation:n.generation},n.done.push(l);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift();n.done.push(a),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=r,n.lastOp=n.lastSelOp=i,n.lastOrigin=n.lastSelOrigin=t.origin,s||vl(e,"historyAdded")}function ri(e,t){var a=Ai(t);a&&a.ranges&&a.equals(e)||t.push(e)}function si(e,t,a,i){var n=t["spans_"+e.id],l=0;e.iter(Math.max(e.first,a),Math.min(e.first+e.size,i),function(a){a.markedSpans&&((n||(n=t["spans_"+e.id]={}))[l]=a.markedSpans),++l})}function di(e){if(!e)return null;for(var t,a=0;a<e.length;++a)e[a].marker.explicitlyCleared?t||(t=e.slice(0,a)):t&&t.push(e[a]);return t?t.length?t:null:e}function ci(e,t,a){for(var i=0,n=[];i<e.length;++i){var l=e[i];if(l.ranges)n.push(a?ie.prototype.deepCopy.call(l):l);else{var l=l.changes,o=[];n.push({changes:o});for(var r=0;r<l.length;++r){var s,d=l[r];if(o.push({from:d.from,to:d.to,text:d.text}),t)for(var c in d)(s=c.match(/^spans_(\d+)$/))&&-1<Li(t,Number(s[1]))&&(Ai(o)[c]=d[c],delete d[c])}}}return n}function ui(e,t,a,i){a<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function mi(e,t,a,i){for(var n=0;n<e.length;++n){var l=e[n],o=!0;if(l.ranges){l.copied||(l=e[n]=l.deepCopy(),l.copied=!0);for(var r=0;r<l.ranges.length;r++)ui(l.ranges[r].anchor,t,a,i),ui(l.ranges[r].head,t,a,i)}else{for(r=0;r<l.changes.length;++r){var s=l.changes[r];if(a<s.from.line)s.from=Tn(s.from.line+i,s.from.ch),s.to=Tn(s.to.line+i,s.to.ch);else if(t<=s.to.line){o=!1;break}}o||(e.splice(0,n+1),n=0)}}}function pi(e,t){var a=t.from.line,i=t.to.line,n=t.text.length-(i-a)-1;mi(e.done,a,i,n),mi(e.undone,a,i,n)}function gi(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function hi(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),bn&&e.ctrlKey&&1==t&&(t=3),t}function bi(e,t){function a(e){return function(){e.apply(null,l)}}var i=e._handlers&&e._handlers[t];if(i){var n,l=Array.prototype.slice.call(arguments,2);Rn?n=Rn.delayedCallbacks:fl?n=fl:(n=fl=[],setTimeout(vi,0));for(var o=0;o<i.length;++o)n.push(a(i[o]))}}function vi(){var e=fl;fl=null;for(var t=0;t<e.length;++t)e[t]()}function fi(e,t,a){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),vl(e,a||t.type,e,t),gi(t)||t.codemirrorIgnore}function ki(e){var t=e._handlers&&e._handlers.cursorActivity;if(t){e=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var a=0;a<t.length;++a)-1==Li(e,t[a])&&e.push(t[a])}}function yi(e,t){var a=e._handlers&&e._handlers[t];return a&&0<a.length}function Si(e){e.prototype.on=function(e,t){hl(this,e,t)},e.prototype.off=function(e,t){bl(this,e,t)}}function Ci(){this.id=null}function Ti(e,t,a){for(var i=0,n=0;;){var l=e.indexOf("\t",i);-1==l&&(l=e.length);var o=l-i;if(l==e.length||n+o>=t)return i+Math.min(o,t-n);if(n+=l-i,n+=a-n%a,i=l+1,n>=t)return i}}function wi(e){for(;Al.length<=e;)Al.push(Ai(Al)+" ");return Al[e]}function Ai(e){return e[e.length-1]}function Li(e,t){for(var a=0;a<e.length;++a)if(e[a]==t)return a;return-1}function Ei(e,t){for(var a=[],i=0;i<e.length;i++)a[i]=t(e[i],i);return a}function Fi(){}function Di(e,t){var a;return Object.create?a=Object.create(e):(Fi.prototype=e,a=new Fi),t&&Ri(t,a),a}function Ri(e,t,a){t||(t={});for(var i in e)!e.hasOwnProperty(i)||!1===a&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function Ii(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Bi(e,t){return t?!!(-1<t.source.indexOf("\\w")&&Dl(e))||t.test(e):Dl(e)}function xi(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function zi(e){return 768<=e.charCodeAt(0)&&Rl.test(e)}function Pi(e,t,a,i){if(e=document.createElement(e),a&&(e.className=a),i&&(e.style.cssText=i),"string"==typeof t)e.appendChild(document.createTextNode(t));else if(t)for(a=0;a<t.length;++a)e.appendChild(t[a]);return e}function Ni(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function Oi(e,t){return Ni(e).appendChild(t)}function ji(){return document.activeElement}function Mi(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function Vi(e,t){for(var a=e.split(" "),i=0;i<a.length;i++)a[i]&&!Mi(a[i]).test(t)&&(t+=" "+a[i]);return t}function Ki(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),a=0;a<t.length;a++){var i=t[a].CodeMirror;i&&e(i)}}function Hi(){var e;hl(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Ki(pt)},100))}),hl(window,"blur",function(){Ki(Nt)})}function _i(e){if(null==Bl){var t=Pi("span","\u200b");Oi(e,Pi("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Bl=1>=t.offsetWidth&&2<t.offsetHeight&&!(ln&&8>on))}return e=Bl?Pi("span","\u200b"):Pi("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px"),e.setAttribute("cm-text",""),e}function qi(e,t,a,i){if(!e)return i(t,a,"ltr");for(var n=!1,l=0;l<e.length;++l){var o=e[l];(o.from<a&&o.to>t||t==a&&o.to==t)&&(i(Math.max(o.from,t),Math.min(o.to,a),1==o.level?"rtl":"ltr"),n=!0)}n||i(t,a,"ltr")}function Wi(e){return e.level%2?e.to:e.from}function Ui(e){return e.level%2?e.from:e.to}function Gi(e){return(e=ai(e))?Wi(e[0]):0}function $i(e){var t=ai(e);return t?Ui(Ai(t)):e.text.length}function Yi(e,t){var a=Ya(e.doc,t),i=Ca(a);return i!=a&&(t=Xa(i)),i=(a=ai(i))?a[0].level%2?$i(i):Gi(i):0,Tn(t,i)}function Zi(e,t){var a=Yi(e,t.line),i=Ya(e.doc,a.line),n=ai(i);return n&&0!=n[0].level?a:(i=Math.max(0,i.text.search(/\S/)),Tn(a.line,t.line==a.line&&t.ch<=i&&t.ch?0:i))}function Ji(e,t){_l=null;for(var a,i=0;i<e.length;++i){var n=e[i];if(n.from<t&&n.to>t)return i;if(n.from==t||n.to==t){if(null!=a){var l;l=n.level;var o=e[a].level,r=e[0].level;if(l=l==r||o!=r&&l<o)return n.from!=n.to&&(_l=a),i;n.from!=n.to&&(_l=i);break}a=i}}return a}function Qi(e,t,a,i){if(!i)return t+a;do t+=a;while(0<t&&zi(e.text.charAt(t)));return t}function Xi(e,t,a,i){var n=ai(e);if(!n)return en(e,t,a,i);var l=Ji(n,t),o=n[l];for(t=Qi(e,t,o.level%2?-a:a,i);;){if(t>o.from&&t<o.to)return t;if(t==o.from||t==o.to)return Ji(n,t)==l?t:(o=n[l+a],0<a==o.level%2?o.to:o.from);if(o=n[l+=a],!o)return null;t=0<a==o.level%2?Qi(e,o.to,-1,i):Qi(e,o.from,1,i)}}function en(e,t,a,i){if(t+=a,i)for(;0<t&&zi(e.text.charAt(t));)t+=a;return 0>t||t>e.text.length?null:t}var tn=/gecko\/\d/i.test(navigator.userAgent),an=/MSIE \d/.test(navigator.userAgent),nn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ln=an||nn,on=ln&&(an?document.documentMode||6:nn[1]),rn=/WebKit\//.test(navigator.userAgent),sn=rn&&/Qt\/\d+\.\d+/.test(navigator.userAgent),dn=/Chrome\//.test(navigator.userAgent),cn=/Opera\//.test(navigator.userAgent),un=/Apple Computer/.test(navigator.vendor),mn=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),pn=/PhantomJS/.test(navigator.userAgent),gn=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),hn=gn||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),bn=gn||/Mac/.test(navigator.platform),vn=/win/i.test(navigator.platform),fn=cn&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);fn&&(fn=Number(fn[1])),fn&&15<=fn&&(cn=!1,rn=!0);var kn=bn&&(sn||cn&&(null==fn||12.11>fn)),yn=tn||ln&&9<=on,Sn=!1,Cn=!1;g.prototype=Ri({update:function(e){var t=e.scrollWidth>e.clientWidth+1,a=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;return a?(this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?i:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=a?i+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(a?i:0))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedOverlay&&0<e.clientHeight&&(0==i&&this.overlayHack(),this.checkedOverlay=!0),{right:a?i:0,bottom:t?i:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e)},overlayHack:function(){this.horiz.style.minHeight=this.vert.style.minWidth=bn&&!mn?"12px":"18px";var e=this,t=function(t){(t.target||t.srcElement)!=e.vert&&(t.target||t.srcElement)!=e.horiz&&tt(e.cm,bt)(t)};hl(this.vert,"mousedown",t),hl(this.horiz,"mousedown",t)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},g.prototype),h.prototype=Ri({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},h.prototype),e.scrollbarModel={"native":g,"null":h},w.prototype.signal=function(e,t){yi(e,t)&&this.events.push(arguments)},w.prototype.finish=function(){for(var e=0;e<this.events.length;e++)vl.apply(null,this.events[e])};var Tn=e.Pos=function(e,t){return this instanceof Tn?(this.line=e,void(this.ch=t)):new Tn(e,t)},wn=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},An=null;Y.prototype=Ri({init:function(e){function t(e){if(i.somethingSelected())An=i.getSelections(),a.inaccurateSelection&&(a.prevInput="",a.inaccurateSelection=!1,l.value=An.join("\n"),Ll(l));else{if(!i.options.lineWiseCopyCut)return;var t=G(i);An=t.text,"cut"==e.type?i.setSelections(t.ranges,null,Sl):(a.prevInput="",l.value=t.text.join("\n"),Ll(l))}"cut"==e.type&&(i.state.cutIncoming=!0)}var a=this,i=this.cm,n=this.wrapper=Z(),l=this.textarea=n.firstChild;e.wrapper.insertBefore(n,e.wrapper.firstChild),gn&&(l.style.width="0px"),hl(l,"input",function(){ln&&9<=on&&a.hasSelection&&(a.hasSelection=null),a.poll()}),hl(l,"paste",function(){if(rn&&!i.state.fakedLastChar&&!(200>new Date-i.state.lastMiddleDown)){var e=l.selectionStart,t=l.selectionEnd;l.value+="$",l.selectionEnd=t,l.selectionStart=e,i.state.fakedLastChar=!0}i.state.pasteIncoming=!0,a.fastPoll()}),hl(l,"cut",t),hl(l,"copy",t),hl(e.scroller,"paste",function(t){gt(e,t)||(i.state.pasteIncoming=!0,a.focus())}),hl(e.lineSpace,"selectstart",function(t){gt(e,t)||ml(t)}),hl(l,"compositionstart",function(){var e=i.getCursor("from");a.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),hl(l,"compositionend",function(){a.composing&&(a.poll(),a.composing.range.clear(),a.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,a=e.doc,i=Ce(e);if(e.options.moveInputWithCursor){var e=We(e,a.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),n=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,e.top+n.top-a.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,e.left+n.left-a.left))}return i},showSelection:function(e){var t=this.cm.display;Oi(t.cursorDiv,e.cursors),Oi(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,a,i=this.cm,n=i.doc;i.somethingSelected()?(this.prevInput="",t=n.sel.primary(),a=(t=Vl&&(100<t.to().line-t.from().line||1e3<(a=i.getSelection()).length))?"-":a||i.getSelection(),this.textarea.value=a,i.state.focused&&Ll(this.textarea),ln&&9<=on&&(this.hasSelection=a)):e||(this.prevInput=this.textarea.value="",ln&&9<=on&&(this.hasSelection=null)),this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!hn||ji()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function e(){a.poll()||t?(a.pollingFast=!1,a.slowPoll()):(t=!0,a.polling.set(60,e))}var t=!1,a=this;a.pollingFast=!0,a.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,a=this.prevInput;if(!e.state.focused||Ml(t)&&!a||W(e)||e.options.disableInput||e.state.keySeq)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var i=t.value;if(i==a&&!e.somethingSelected())return!1;if(ln&&9<=on&&this.hasSelection===i||bn&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var n=i.charCodeAt(0);if(8203!=n||a||(a="\u200b"),8666==n)return this.reset(),this.cm.execCommand("undo")}for(var l=0,n=Math.min(a.length,i.length);l<n&&a.charCodeAt(l)==i.charCodeAt(l);)++l;var o=this;return et(e,function(){U(e,i.slice(l),a.length-l,null,o.composing?"*compose":null),1e3<i.length||-1<i.indexOf("\n")?t.value=o.prevInput="":o.prevInput=i,o.composing&&(o.composing.range.clear(),o.composing.range=e.markText(o.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){ln&&9<=on&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=o.selectionStart){var e=n.somethingSelected(),t="\u200b"+(e?o.value:"");o.value="\u21da",o.value=t,i.prevInput=e?"":"\u200b",o.selectionStart=1,o.selectionEnd=t.length,l.selForContextMenu=n.doc.sel}}function a(){if(i.contextMenuPending=!1,i.wrapper.style.position="relative",o.style.cssText=d,ln&&9>on&&l.scrollbars.setScrollTop(l.scroller.scrollTop=s),null!=o.selectionStart){(!ln||ln&&9>on)&&t();var e=0,a=function(){l.selForContextMenu==n.doc.sel&&0==o.selectionStart&&0<o.selectionEnd&&"\u200b"==i.prevInput?tt(n,Yn.selectAll)(n):10>e++?l.detectingSelectAll=setTimeout(a,500):l.input.reset()};l.detectingSelectAll=setTimeout(a,200)}}var i=this,n=i.cm,l=n.display,o=i.textarea,r=ht(n,e),s=l.scroller.scrollTop;if(r&&!cn){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(r)&&tt(n,he)(n.doc,oe(r),Sl);var d=o.style.cssText;if(i.wrapper.style.position="absolute",o.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(ln?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",rn)var c=window.scrollY;if(l.input.focus(),rn&&window.scrollTo(null,c),l.input.reset(),n.somethingSelected()||(o.value=i.prevInput=" "),i.contextMenuPending=!0,l.selForContextMenu=n.doc.sel,clearTimeout(l.detectingSelectAll),ln&&9<=on&&t(),yn){gl(e);var u=function(){bl(window,"mouseup",u),setTimeout(a,20)};hl(window,"mouseup",u)}else setTimeout(a,50)}},setUneditable:Fi,needsContentAttribute:!1},Y.prototype),J.prototype=Ri({init:function(e){function t(e){if(i.somethingSelected())An=i.getSelections(),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=G(i);An=t.text,"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,Sl),i.replaceSelection("",null,"cut")})}if(e.clipboardData&&!gn)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",An.join("\n"));else{var a=Z();e=a.firstChild,i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),e.value=An.join("\n");var n=document.activeElement;Ll(e),setTimeout(function(){i.display.lineSpace.removeChild(a),n.focus()},50)}}var a=this,i=a.cm;e=a.div=e.lineDiv,e.contentEditable="true",$(e),hl(e,"paste",function(e){var t=e.clipboardData&&e.clipboardData.getData("text/plain");t&&(e.preventDefault(),i.replaceSelection(t,null,"paste"))}),hl(e,"compositionstart",function(e){if(e=e.data,a.composing={sel:i.doc.sel,data:e,startData:e},e){var t=i.doc.sel.primary(),n=i.getLine(t.head.line).indexOf(e,Math.max(0,t.head.ch-e.length));-1<n&&n<=t.head.ch&&(a.composing.sel=oe(Tn(t.head.line,n),Tn(t.head.line,n+e.length)))}}),hl(e,"compositionupdate",function(e){a.composing.data=e.data}),hl(e,"compositionend",function(e){var t=a.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||a.applyComposition(t),a.composing==t&&(a.composing=null)},50))}),hl(e,"touchstart",function(){a.forceCompositionEnd()}),hl(e,"input",function(){a.composing||a.pollContent()||et(a.cm,function(){ot(i)})}),hl(e,"copy",t),hl(e,"cut",t)},prepareSelection:function(){var e=Ce(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),a=ee(this.cm,e.anchorNode,e.anchorOffset),i=ee(this.cm,e.focusNode,e.focusOffset);if((!a||a.bad||!i||i.bad||0!=wn(_(a,i),t.from())||0!=wn(H(a,i),t.to()))&&(a=Q(this.cm,t.from()),i=Q(this.cm,t.to()),a||i)){var n=this.cm.display.view,t=e.rangeCount&&e.getRangeAt(0);a?i||(i=n[n.length-1].measure,i=i.maps?i.maps[i.maps.length-1]:i.map,i={node:i[i.length-1],offset:i[i.length-2]-i[i.length-3]}):a={node:n[0].measure.map[2],offset:0};try{var l=El(a.node,a.offset,i.offset,i.node)}catch(e){}l&&(e.removeAllRanges(),e.addRange(l),t&&null==e.anchorNode?e.addRange(t):tn&&this.startGracePeriod()),this.rememberSelection();
}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){Oi(this.cm.display.cursorDiv,e.cursors),Oi(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();return!!e.rangeCount&&(e=e.getRangeAt(0).commonAncestorContainer,Il(this.div,e))},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():et(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var a=ee(t,e.anchorNode,e.anchorOffset),i=ee(t,e.focusNode,e.focusOffset);a&&i&&et(t,function(){he(t.doc,oe(a,i),Sl),(a.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,a=e.doc.sel.primary(),i=a.from(),a=a.to();if(i.line<t.viewFrom||a.line>t.viewTo-1)return!1;var n;i.line==t.viewFrom||0==(n=dt(e,i.line))?(i=Xa(t.view[0].line),n=t.view[0].node):(i=Xa(t.view[n].line),n=t.view[n-1].node.nextSibling);var l=dt(e,a.line);for(l==t.view.length-1?(a=t.viewTo-1,t=t.view[l].node):(a=Xa(t.view[l+1].line)-1,t=t.view[l+1].node.previousSibling),t=jl(ae(e,n,t,i,a)),n=Za(e.doc,Tn(i,0),Tn(a,Ya(e.doc,a).text.length));1<t.length&&1<n.length;)if(Ai(t)==Ai(n))t.pop(),n.pop(),a--;else{if(t[0]!=n[0])break;t.shift(),n.shift(),i++}for(var o=0,l=0,r=t[0],s=n[0],d=Math.min(r.length,s.length);o<d&&r.charCodeAt(o)==s.charCodeAt(o);)++o;for(r=Ai(t),s=Ai(n),d=Math.min(r.length-(1==t.length?o:0),s.length-(1==n.length?o:0));l<d&&r.charCodeAt(r.length-l-1)==s.charCodeAt(s.length-l-1);)++l;return t[t.length-1]=r.slice(0,r.length-l),t[0]=t[0].slice(o),i=Tn(i,o),a=Tn(a,n.length?Ai(n).length-l:0),1<t.length||t[0]||wn(i,a)?($t(e.doc,t,i,a,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){e.data&&e.data!=e.startData&&tt(this.cm,U)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.setAttribute("contenteditable","false")},onKeyPress:function(e){e.preventDefault(),tt(this.cm,U)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},onContextMenu:Fi,resetPosition:Fi,needsContentAttribute:!0},J.prototype),e.inputStyles={textarea:Y,contenteditable:J},ie.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var a=this.ranges[t],i=e.ranges[t];if(0!=wn(a.anchor,i.anchor)||0!=wn(a.head,i.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new ne(K(this.ranges[t].anchor),K(this.ranges[t].head));return new ie(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var a=0;a<this.ranges.length;a++){var i=this.ranges[a];if(0<=wn(t,i.from())&&0>=wn(e,i.to()))return a}return-1}},ne.prototype={from:function(){return _(this.anchor,this.head)},to:function(){return H(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Ln,En,Fn,Dn={left:0,right:0,top:0,bottom:0},Rn=null,In=0,Bn=0,xn=0,zn=null;ln?zn=-.53:tn?zn=15:dn?zn=-.7:un&&(zn=-1/3);var Pn=function(e){var t=e.wheelDeltaX,a=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==a&&e.detail&&e.axis==e.VERTICAL_AXIS?a=e.detail:null==a&&(a=e.wheelDelta),{x:t,y:a}};e.wheelEventPixels=function(e){return e=Pn(e),e.x*=zn,e.y*=zn,e};var Nn=new Ci,On=null,jn=e.changeEnd=function(e){return e.text?Tn(e.from.line+e.text.length-1,Ai(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var a=this.options,i=a[e];a[e]==t&&"mode"!=e||(a[e]=t,Vn.hasOwnProperty(e)&&tt(this,Vn[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](oa(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,a=0;a<t.length;++a)if(t[a]==e||t[a].name==e)return t.splice(a,1),!0},addOverlay:at(function(t,a){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:t,opaque:a&&a.opaque}),this.state.modeGen++,ot(this)}),removeOverlay:at(function(e){for(var t=this.state.overlays,a=0;a<t.length;++a){var i=t[a].modeSpec;if(i==e||"string"==typeof e&&i.name==e){t.splice(a,1),this.state.modeGen++,ot(this);break}}}),indentLine:at(function(e,t,a){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),se(this.doc,e)&&Xt(this,e,t,a)}),indentSelection:at(function(e){for(var t=this.doc.sel.ranges,a=-1,i=0;i<t.length;i++){var n=t[i];if(n.empty())n.head.line>a&&(Xt(this,n.head.line,e,!0),a=n.head.line,i==this.doc.sel.primIndex&&Jt(this));else{for(var l=n.from(),n=n.to(),o=Math.max(a,l.line),a=Math.min(this.lastLine(),n.line-(n.ch?0:1))+1,n=o;n<a;++n)Xt(this,n,e);n=this.doc.sel.ranges,0==l.ch&&t.length==n.length&&0<n[i].from().ch&&me(this.doc,i,new ne(l,n[i].to()),Sl)}}}),getTokenAt:function(e,t){return Ba(this,e,t)},getLineTokens:function(e,t){return Ba(this,Tn(e),t,!0)},getTokenTypeAt:function(e){e=re(this.doc,e);var t=Pa(this,Ya(this.doc,e.line)),a=0,i=(t.length-1)/2;if(e=e.ch,0==e)t=t[2];else for(;;){var n=a+i>>1;if((n?t[2*n-1]:0)>=e)i=n;else{if(!(t[2*n+1]<e)){t=t[2*n+2];break}a=n+1}}return a=t?t.indexOf("cm-overlay "):-1,0>a?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var a=this.doc.mode;return a.innerMode?e.innerMode(a,this.getTokenAt(t).state).mode:a},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var a=[];if(!Un.hasOwnProperty(t))return a;var i=Un[t],n=this.getModeAt(e);if("string"==typeof n[t])i[n[t]]&&a.push(i[n[t]]);else if(n[t])for(var l=0;l<n[t].length;l++){var o=i[n[t][l]];o&&a.push(o)}else n.helperType&&i[n.helperType]?a.push(i[n.helperType]):i[n.name]&&a.push(i[n.name]);for(l=0;l<i._global.length;l++)o=i._global[l],o.pred(n,this)&&-1==Li(a,o.val)&&a.push(o.val);return a},getStateAfter:function(e,t){var a=this.doc;return e=Math.max(a.first,Math.min(null==e?a.first+a.size-1:e,a.first+a.size-1)),Fe(this,e+1,t)},cursorCoords:function(e,t){var a;return a=this.doc.sel.primary(),a=null==e?a.head:"object"==typeof e?re(this.doc,e):e?a.from():a.to(),We(this,a,t||"page")},charCoords:function(e,t){return qe(this,re(this.doc,e),t||"page")},coordsChar:function(e,t){return e=_e(this,e,t||"page"),$e(this,e.left,e.top)},lineAtHeight:function(e,t){return e=_e(this,{top:e,left:0},t||"page").top,ei(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var a,i=!1;return"number"==typeof e?(a=this.doc.first+this.doc.size-1,e<this.doc.first?e=this.doc.first:e>a&&(e=a,i=!0),a=Ya(this.doc,e)):a=e,He(this,a,{top:0,left:0},t||"page").top+(i?this.doc.height-ti(a):0)},defaultTextHeight:function(){return Ze(this.display)},defaultCharWidth:function(){return Je(this.display)},setGutterMarker:at(function(e,t,a){return ea(this.doc,e,"gutter",function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=a,!a&&xi(i)&&(e.gutterMarkers=null),!0})}),clearGutter:at(function(e){var t=this,a=t.doc,i=a.first;a.iter(function(a){a.gutterMarkers&&a.gutterMarkers[e]&&(a.gutterMarkers[e]=null,rt(t,i,"gutter"),xi(a.gutterMarkers)&&(a.gutterMarkers=null)),++i})}),lineInfo:function(e){if("number"==typeof e){if(!se(this.doc,e))return null;var t=e;if(e=Ya(this.doc,e),!e)return null}else if(t=Xa(e),null==t)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,a,i,n){var l=this.display;e=We(this,re(this.doc,e));var o=e.bottom,r=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==i)o=e.top;else if("above"==i||"near"==i){var s=Math.max(l.wrapper.clientHeight,this.doc.height),d=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>s)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=s&&(o=e.bottom),r+t.offsetWidth>d&&(r=d-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="","right"==n?(r=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==n?r=0:"middle"==n&&(r=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=r+"px"),a&&(e=Yt(this,r,o,r+t.offsetWidth,o+t.offsetHeight),null!=e.scrollTop&&Ct(this,e.scrollTop),null!=e.scrollLeft&&Tt(this,e.scrollLeft))},triggerOnKeyDown:at(Rt),triggerOnKeyPress:at(xt),triggerOnKeyUp:Bt,execCommand:function(e){if(Yn.hasOwnProperty(e))return Yn[e](this)},findPosH:function(e,t,a,i){var n=1;0>t&&(n=-1,t=-t);var l=0;for(e=re(this.doc,e);l<t&&(e=aa(this.doc,e,n,a,i),!e.hitSide);++l);return e},moveH:at(function(e,t){var a=this;a.extendSelectionsBy(function(i){return a.display.shift||a.doc.extend||i.empty()?aa(a.doc,i.head,e,t,a.options.rtlMoveVisually):0>e?i.from():i.to()},Tl)}),deleteH:at(function(e,t){var a=this.doc;this.doc.sel.somethingSelected()?a.replaceSelection("",null,"+delete"):ta(this,function(i){var n=aa(a,i.head,e,t,!1);return 0>e?{from:n,to:i.head}:{from:i.head,to:n}})}),findPosV:function(e,t,a,i){var n=1;0>t&&(n=-1,t=-t);var l=0;for(e=re(this.doc,e);l<t&&(e=We(this,e,"div"),null==i?i=e.left:e.left=i,e=ia(this,e,n,a),!e.hitSide);++l);return e},moveV:at(function(e,t){var a=this,i=this.doc,n=[],l=!a.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(o){if(l)return 0>e?o.from():o.to();var r=We(a,o.head,"div");null!=o.goalColumn&&(r.left=o.goalColumn),n.push(r.left);var s=ia(a,r,e,t);return"page"==t&&o==i.sel.primary()&&Zt(a,null,qe(a,s,"div").top-r.top),s},Tl),n.length)for(var o=0;o<i.sel.ranges.length;o++)i.sel.ranges[o].goalColumn=n[o]}),findWordAt:function(e){var t=Ya(this.doc,e.line).text,a=e.ch,i=e.ch;if(t){var n=this.getHelper(e,"wordChars");(0>e.xRel||i==t.length)&&a?--a:++i;for(var l=t.charAt(a),l=Bi(l,n)?function(e){return Bi(e,n)}:/\s/.test(l)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Bi(e)};0<a&&l(t.charAt(a-1));)--a;for(;i<t.length&&l(t.charAt(i));)++i}return new ne(Tn(e.line,a),Tn(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Pl(this.display.cursorDiv,"CodeMirror-overwrite"):zl(this.display.cursorDiv,"CodeMirror-overwrite"),vl(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ji()},scrollTo:at(function(e,t){null==e&&null==t||Qt(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ie(this)-this.display.barHeight,width:e.scrollWidth-Ie(this)-this.display.barWidth,clientHeight:xe(this),clientWidth:Be(this)}},scrollIntoView:at(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:Tn(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Qt(this),this.curOp.scrollToPos=e;else{var a=Yt(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(a.scrollLeft,a.scrollTop)}}),setSize:at(function(e,t){function a(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var i=this;null!=e&&(i.display.wrapper.style.width=a(e)),null!=t&&(i.display.wrapper.style.height=a(t)),i.options.lineWrapping&&Ve(this);var n=i.display.viewFrom;i.doc.iter(n,i.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){rt(i,n,"widget");break}++n}),i.curOp.forceUpdate=!0,vl(i,"refresh",this)}),operation:function(e){return et(this,e)},refresh:at(function(){var e=this.display.cachedTextHeight;ot(this),this.curOp.forceUpdate=!0,Ke(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),d(this),(null==e||.5<Math.abs(e-Ze(this.display)))&&l(this),vl(this,"refresh",this)}),swapDoc:at(function(e){var t=this.doc;return t.cm=null,$a(this,e),Ke(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,bi(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Si(e);var Mn=e.defaults={},Vn=e.optionHandlers={},Kn=e.Init={toString:function(){return"CodeMirror.Init"}};na("value","",function(e,t){e.setValue(t)},!0),na("mode",null,function(e,t){e.doc.modeOption=t,a(e)},!0),na("indentUnit",2,a,!0),na("indentWithTabs",!1),na("smartIndent",!0),na("tabSize",4,function(e){i(e),Ke(e),ot(e)},!0),na("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,a,i){t.state.specialChars=new RegExp(a.source+(a.test("\t")?"":"|\t"),"g"),i!=e.Init&&t.refresh()}),na("specialCharPlaceholder",function(e){var t=Pi("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t},function(e){e.refresh()},!0),na("electricChars",!0),na("inputStyle",hn?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0),na("rtlMoveVisually",!vn),na("wholeLineUpdateBefore",!0),na("theme","default",function(e){o(e),r(e)},!0),na("keyMap","default",function(t,a,i){a=oa(a),(i=i!=e.Init&&oa(i))&&i.detach&&i.detach(t,a),a.attach&&a.attach(t,i||null)}),na("extraKeys",null),na("lineWrapping",!1,function(e){e.options.lineWrapping?(Pl(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(zl(e.display.wrapper,"CodeMirror-wrap"),u(e)),l(e),ot(e),Ke(e),setTimeout(function(){v(e)},100)},!0),na("gutters",[],function(e){m(e.options),r(e)},!0),na("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?T(e.display)+"px":"0",e.refresh()},!0),na("coverGutterNextToScrollbar",!1,function(e){v(e)},!0),na("scrollbarStyle","native",function(e){b(e),v(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),na("lineNumbers",!1,function(e){m(e.options),r(e)},!0),na("firstLineNumber",1,r,!0),na("lineNumberFormatter",function(e){return e},r,!0),na("showCursorWhenSelecting",!1,Se,!0),na("resetSelectionOnContextMenu",!0),na("lineWiseCopyCut",!0),na("readOnly",!1,function(e,t){"nocursor"==t?(Nt(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||e.display.input.reset())}),na("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),na("dragDrop",!0,function(t,a,i){!a!=!(i&&i!=e.Init)&&(i=t.display.dragFunctions,a=a?hl:bl,a(t.display.scroller,"dragstart",i.start),a(t.display.scroller,"dragenter",i.simple),a(t.display.scroller,"dragover",i.simple),a(t.display.scroller,"drop",i.drop))}),na("cursorBlinkRate",530),na("cursorScrollMargin",0),na("cursorHeight",1,Se,!0),na("singleCursorHeightPerLine",!0,Se,!0),na("workTime",100),na("workDelay",100),na("flattenSpans",!0,i,!0),na("addModeClass",!1,i,!0),na("pollInterval",100),na("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),na("historyEventDelay",1250),na("viewportMargin",10,function(e){e.refresh()},!0),na("maxHighlightLength",1e4,i,!0),na("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),na("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),na("autofocus",null);var Hn=e.modes={},_n=e.mimeModes={};e.defineMode=function(t,a){e.defaults.mode||"null"==t||(e.defaults.mode=t),2<arguments.length&&(a.dependencies=Array.prototype.slice.call(arguments,2)),Hn[t]=a},e.defineMIME=function(e,t){_n[e]=t},e.resolveMode=function(t){if("string"==typeof t&&_n.hasOwnProperty(t))t=_n[t];else if(t&&"string"==typeof t.name&&_n.hasOwnProperty(t.name)){var a=_n[t.name];"string"==typeof a&&(a={name:a}),t=Di(a,t),t.name=a.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,a){a=e.resolveMode(a);var i=Hn[a.name];if(!i)return e.getMode(t,"text/plain");if(i=i(t,a),qn.hasOwnProperty(a.name)){var n,l=qn[a.name];for(n in l)l.hasOwnProperty(n)&&(i.hasOwnProperty(n)&&(i["_"+n]=i[n]),i[n]=l[n])}if(i.name=a.name,a.helperType&&(i.helperType=a.helperType),a.modeProps)for(n in a.modeProps)i[n]=a.modeProps[n];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var qn=e.modeExtensions={};e.extendMode=function(e,t){var a=qn.hasOwnProperty(e)?qn[e]:qn[e]={};Ri(t,a)},e.defineExtension=function(t,a){e.prototype[t]=a},e.defineDocExtension=function(e,t){dl.prototype[e]=t},e.defineOption=na;var Wn=[];e.defineInitHook=function(e){Wn.push(e)};var Un=e.helpers={};e.registerHelper=function(t,a,i){Un.hasOwnProperty(t)||(Un[t]=e[t]={_global:[]}),Un[t][a]=i},e.registerGlobalHelper=function(t,a,i,n){e.registerHelper(t,a,n),Un[t]._global.push({pred:i,val:n})};var Gn=e.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var a,i={};for(a in t){var n=t[a];n instanceof Array&&(n=n.concat([])),i[a]=n}return i},$n=e.startState=function(e,t,a){return!e.startState||e.startState(t,a)};e.innerMode=function(e,t){for(;e.innerMode;){var a=e.innerMode(t);if(!a||a.mode==e)break;t=a.state,e=a.mode}return a||{mode:e,state:t}};var Yn=e.commands={selectAll:function(e){e.setSelection(Tn(e.firstLine(),0),Tn(e.lastLine()),Sl)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Sl)},killLine:function(e){ta(e,function(t){if(t.empty()){var a=Ya(e.doc,t.head.line).text.length;return t.head.ch==a&&t.head.line<e.lastLine()?{from:t.head,to:Tn(t.head.line+1,0)}:{from:t.head,to:Tn(t.head.line,a)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){ta(e,function(t){return{from:Tn(t.from().line,0),to:re(e.doc,Tn(t.to().line+1,0))}})},delLineLeft:function(e){ta(e,function(e){return{from:Tn(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){ta(e,function(t){var a=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:a},"div"),to:t.from()}})},delWrappedLineRight:function(e){ta(e,function(t){var a=e.charCoords(t.head,"div").top+5,a=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:a},"div");return{from:t.from(),to:a}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(Tn(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Tn(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Yi(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return Zi(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){t=t.head.line;for(var a,i=Ya(e.doc,t);a=ya(i,!1);)i=a.find(1,!0).line,t=null;return a=(a=ai(i))?a[0].level%2?Gi(i):$i(i):i.text.length,Tn(null==t?Xa(i):t,a)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){return t=e.charCoords(t.head,"div").top+5,e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div")},Tl)},goLineLeft:function(e){e.extendSelectionsBy(function(t){return t=e.charCoords(t.head,"div").top+5,e.coordsChar({left:0,top:t},"div")},Tl)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var a=e.charCoords(t.head,"div").top+5,a=e.coordsChar({left:0,top:a},"div");return a.ch<e.getLine(a.line).search(/\S/)?Zi(e,t.head):a},Tl)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],a=e.listSelections(),i=e.options.tabSize,n=0;n<a.length;n++){var l=a[n].from(),l=wl(e.getLine(l.line),l.ch,i);t.push(Array(i-l%i+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){et(e,function(){for(var t=e.listSelections(),a=[],i=0;i<t.length;i++){var n=t[i].head,l=Ya(e.doc,n.line).text;if(l)if(n.ch==l.length&&(n=new Tn(n.line,n.ch-1)),0<n.ch)n=new Tn(n.line,n.ch+1),e.replaceRange(l.charAt(n.ch-1)+l.charAt(n.ch-2),Tn(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var o=Ya(e.doc,n.line-1).text;o&&e.replaceRange(l.charAt(0)+"\n"+o.charAt(o.length-1),Tn(n.line-1,o.length-1),Tn(n.line,1),"+transpose")}a.push(new ne(n,n))}e.setSelections(a)})},newlineAndIndent:function(e){et(e,function(){for(var t=e.listSelections().length,a=0;a<t;a++){var i=e.listSelections()[a];e.replaceRange("\n",i.anchor,i.head,"+input"),e.indentLine(i.from().line+1,null,!0),Jt(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},Zn=e.keyMap={};Zn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Zn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Zn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Zn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Zn["default"]=bn?Zn.macDefault:Zn.pcDefault,e.normalizeKeyMap=function(e){var t,a={};for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!/^(name|fallthrough|(de|at)tach)$/.test(t)){if("..."!=i)for(var n=Ei(t.split(" "),la),l=0;l<n.length;l++){var o,r;l==n.length-1?(r=t,o=i):(r=n.slice(0,l+1).join(" "),o="...");var s=a[r];if(s){if(s!=o)throw Error("Inconsistent bindings for "+r)}else a[r]=o}delete e[t]}}for(var d in a)e[d]=a[d];return e};var Jn=e.lookupKey=function(e,t,a,i){t=oa(t);var n=t.call?t.call(e,i):t[e];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&a(n))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Jn(e,t.fallthrough,a,i);for(n=0;n<t.fallthrough.length;n++){var l=Jn(e,t.fallthrough[n],a,i);if(l)return l}}},Qn=e.isModifierKey=function(e){return e="string"==typeof e?e:Hl[e.keyCode],"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},Xn=e.keyName=function(e,t){if(cn&&34==e.keyCode&&e["char"])return!1;var a=Hl[e.keyCode],i=a;return null!=i&&!e.altGraphKey&&(e.altKey&&"Alt"!=a&&(i="Alt-"+i),(kn?e.metaKey:e.ctrlKey)&&"Ctrl"!=a&&(i="Ctrl-"+i),(kn?e.ctrlKey:e.metaKey)&&"Cmd"!=a&&(i="Cmd-"+i),!t&&e.shiftKey&&"Shift"!=a&&(i="Shift-"+i),i)};e.fromTextArea=function(t,a){function i(){t.value=s.getValue()}if(a=a?Ri(a):{},a.value=t.value,!a.tabindex&&t.tabIndex&&(a.tabindex=t.tabIndex),!a.placeholder&&t.placeholder&&(a.placeholder=t.placeholder),null==a.autofocus){var n=ji();a.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}if(t.form&&(hl(t.form,"submit",i),!a.leaveSubmitMethodAlone)){var l=t.form,o=l.submit;try{var r=l.submit=function(){i(),l.submit=o,l.submit(),l.submit=r}}catch(e){}}a.finishInit=function(e){e.save=i,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,i(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(bl(t.form,"submit",i),"function"==typeof t.form.submit&&(t.form.submit=o))}},t.style.display="none";var s=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},a);return s};var el=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lineStart=this.lastColumnPos=this.lastColumnValue=0};el.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){if(e=this.string.indexOf(e,this.pos),-1<e)return this.pos=e,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=wl(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?wl(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return wl(this.string,null,this.tabSize)-(this.lineStart?wl(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,a){if("string"!=typeof e)return(e=this.string.slice(this.pos).match(e))&&0<e.index?null:(e&&!1!==t&&(this.pos+=e[0].length),e);var i=function(e){return a?e.toLowerCase():e},n=this.string.substr(this.pos,e.length);return i(n)==i(e)?(!1!==t&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var tl=0,al=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++tl};Si(al),al.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Qe(e),yi(this,"clear")){var a=this.find();a&&bi(this,"clear",a.from,a.to)}for(var i=a=null,n=0;n<this.lines.length;++n){var l=this.lines[n],o=ma(l.markedSpans,this);e&&!this.collapsed?rt(e,Xa(l),"text"):e&&(null!=o.to&&(i=Xa(l)),null!=o.from&&(a=Xa(l)));for(var r=l,s=l.markedSpans,d=o,u=void 0,m=0;m<s.length;++m)s[m]!=d&&(u||(u=[])).push(s[m]);r.markedSpans=u,null==o.from&&this.collapsed&&!Aa(this.doc,l)&&e&&Qa(l,Ze(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(n=0;n<this.lines.length;++n)l=Ca(this.lines[n]),o=c(l),o>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=o,e.display.maxLineChanged=!0);null!=a&&e&&this.collapsed&&ot(e,a,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&fe(e.doc)),e&&bi(e,"markerCleared",e,this),t&&Xe(e),this.parent&&this.parent.clear()}},al.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var a,i,n=0;n<this.lines.length;++n){var l=this.lines[n],o=ma(l.markedSpans,this);if(null!=o.from&&(a=Tn(t?l:Xa(l),o.from),-1==e))return a;if(null!=o.to&&(i=Tn(t?l:Xa(l),o.to),1==e))return i}return a&&{from:a,to:i}},al.prototype.changed=function(){var e=this.find(-1,!0),t=this,a=this.doc.cm;e&&a&&et(a,function(){var i=e.line,n=Xa(e.line);(n=Pe(a,n))&&(Me(n),a.curOp.selectionChanged=a.curOp.forceUpdate=!0),a.curOp.updateMaxLine=!0,Aa(t.doc,i)||null==t.height||(n=t.height,t.height=null,(n=Ea(t)-n)&&Qa(i,i.height+n))})},al.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Li(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},al.prototype.detachLine=function(e){this.lines.splice(Li(this.lines,e),1),!this.lines.length&&this.doc.cm&&(e=this.doc.cm.curOp,(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this))};var tl=0,il=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var a=0;a<e.length;++a)e[a].parent=this};Si(il),il.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();bi(this,"clear")}},il.prototype.find=function(e,t){return this.primary.find(e,t)};var nl=e.LineWidget=function(e,t,a){if(a)for(var i in a)a.hasOwnProperty(i)&&(this[i]=a[i]);this.doc=e,this.node=t};Si(nl),nl.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,a=this.line,i=Xa(a);if(null!=i&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(a.widgets=null);var l=Ea(this);Qa(a,Math.max(0,a.height-l)),e&&et(e,function(){var t=-l;ti(a)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Zt(e,null,t),rt(e,i,"widget")})}},nl.prototype.changed=function(){var e=this.height,t=this.doc.cm,a=this.line;this.height=null;var i=Ea(this)-e;i&&(Qa(a,a.height+i),t&&et(t,function(){t.curOp.forceUpdate=!0,ti(a)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Zt(t,null,i)}))};var ll=e.Line=function(e,t,a){this.text=e,fa(this,t),this.height=a?a(this):1};Si(ll),ll.prototype.lineNo=function(){return Xa(this)};var ol={},rl={};Wa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var a=e,i=e+t;a<i;++a){var n=this.lines[a];this.height-=n.height;var l=n;l.parent=null,va(l),bi(n,"delete")}this.lines.splice(e,t);
},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,a){for(this.height+=a,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e)),e=0;e<t.length;++e)t[e].parent=this},iterN:function(e,t,a){for(t=e+t;e<t;++e)if(a(this.lines[e]))return!0}},Ua.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var a=0;a<this.children.length;++a){var i=this.children[a],n=i.chunkSize();if(e<n){var l=Math.min(t,n-e),o=i.height;if(i.removeInner(e,l),this.height-=o-i.height,n==l&&(this.children.splice(a--,1),i.parent=null),0==(t-=l))break;e=0}else e-=n}25>this.size-t&&(1<this.children.length||!(this.children[0]instanceof Wa))&&(a=[],this.collapse(a),this.children=[new Wa(a)],this.children[0].parent=this)},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,a){this.size+=t.length,this.height+=a;for(var i=0;i<this.children.length;++i){var n=this.children[i],l=n.chunkSize();if(e<=l){if(n.insertInner(e,t,a),n.lines&&50<n.lines.length){for(;50<n.lines.length;)e=n.lines.splice(n.lines.length-25,25),e=new Wa(e),n.height-=e.height,this.children.splice(i+1,0,e),e.parent=this;this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),t=new Ua(t);if(e.parent){e.size-=t.size,e.height-=t.height;var a=Li(e.parent.children,e);e.parent.children.splice(a+1,0,t)}else a=new Ua(e.children),a.parent=e,e.children=[a,t],e=a;t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,a){for(var i=0;i<this.children.length;++i){var n=this.children[i],l=n.chunkSize();if(e<l){if(l=Math.min(t,l-e),n.iterN(e,l,a))return!0;if(0==(t-=l))break;e=0}else e-=l}}};var sl=0,dl=e.Doc=function(e,t,a){return this instanceof dl?(null==a&&(a=0),Ua.call(this,[new Wa([new ll("",null)])]),this.first=a,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=a,a=Tn(a,0),this.sel=oe(a),this.history=new ii(null),this.id=++sl,this.modeOption=t,"string"==typeof e&&(e=jl(e)),qa(this,{from:a,to:a,text:e}),void he(this,oe(a),Sl)):new dl(e,t,a)};dl.prototype=Di(Ua.prototype,{constructor:dl,iter:function(e,t,a){a?this.iterN(e-this.first,t-e,a):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var a=0,i=0;i<t.length;++i)a+=t[i].height;this.insertInner(e-this.first,t,a)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ja(this,this.first,this.first+this.size);return!1===e?t:t.join(e||"\n")},setValue:it(function(e){var t=Tn(this.first,0),a=this.first+this.size-1;Ht(this,{from:t,to:Tn(a,Ya(this,a).text.length),text:jl(e),origin:"setValue",full:!0},!0),he(this,oe(t))}),replaceRange:function(e,t,a,i){t=re(this,t),a=a?re(this,a):t,$t(this,e,t,a,i)},getRange:function(e,t,a){return e=Za(this,re(this,e),re(this,t)),!1===a?e:e.join(a||"\n")},getLine:function(e){return(e=this.getLineHandle(e))&&e.text},getLineHandle:function(e){if(se(this,e))return Ya(this,e)},getLineNumber:function(e){return Xa(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ya(this,e)),Ca(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return re(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:it(function(e,t,a){e=re(this,"number"==typeof e?Tn(e,t||0):e),he(this,oe(e,null),a)}),setSelection:it(function(e,t,a){var i=re(this,e);e=re(this,t||e),he(this,oe(i,e),a)}),extendSelection:it(function(e,t,a){ce(this,re(this,e),t&&re(this,t),a)}),extendSelections:it(function(e){for(var t=[],a=0;a<e.length;a++)t[a]=re(this,e[a]);ue(this,t)}),extendSelectionsBy:it(function(e,t){ue(this,Ei(this.sel.ranges,e),t)}),setSelections:it(function(e,t,a){if(e.length){for(var i=0,n=[];i<e.length;i++)n[i]=new ne(re(this,e[i].anchor),re(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),he(this,le(n,t),a)}}),addSelection:it(function(e,t,a){var i=this.sel.ranges.slice(0);i.push(new ne(re(this,e),re(this,t||e))),he(this,le(i,i.length-1),a)}),getSelection:function(e){for(var t,a=this.sel.ranges,i=0;i<a.length;i++){var n=Za(this,a[i].from(),a[i].to());t=t?t.concat(n):n}return!1===e?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],a=this.sel.ranges,i=0;i<a.length;i++){var n=Za(this,a[i].from(),a[i].to());!1!==e&&(n=n.join(e||"\n")),t[i]=n}return t},replaceSelection:function(e,t,a){for(var i=[],n=0;n<this.sel.ranges.length;n++)i[n]=e;this.replaceSelections(i,t,a||"+input")},replaceSelections:it(function(e,t,a){for(var i=[],n=this.sel,l=0;l<n.ranges.length;l++){var o=n.ranges[l];i[l]={from:o.from(),to:o.to(),text:jl(e[l]),origin:a}}if(l=t&&"end"!=t){for(l=[],a=e=Tn(this.first,0),n=0;n<i.length;n++){var r=i[n],o=Vt(r.from,e,a),s=Vt(jn(r),e,a);e=r.to,a=s,"around"==t?(r=this.sel.ranges[n],r=0>wn(r.head,r.anchor),l[n]=new ne(r?s:o,r?o:s)):l[n]=new ne(o,o)}l=new ie(l,this.sel.primIndex)}for(t=l,l=i.length-1;0<=l;l--)Ht(this,i[l]);t?ge(this,t):this.cm&&Jt(this.cm)}),undo:it(function(){qt(this,"undo")}),redo:it(function(){qt(this,"redo")}),undoSelection:it(function(){qt(this,"undo",!0)}),redoSelection:it(function(){qt(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,a=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(i=0;i<e.undone.length;i++)e.undone[i].ranges||++a;return{undo:t,redo:a}},clearHistory:function(){this.history=new ii(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:ci(this.history.done),undone:ci(this.history.undone)}},setHistory:function(e){var t=this.history=new ii(this.history.maxGeneration);t.done=ci(e.done.slice(0),null,!0),t.undone=ci(e.undone.slice(0),null,!0)},addLineClass:it(function(e,t,a){return ea(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(Mi(a).test(e[i]))return!1;e[i]+=" "+a}else e[i]=a;return!0})}),removeLineClass:it(function(e,t,a){return ea(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",n=e[i];if(!n)return!1;if(null==a)e[i]=null;else{var l=n.match(Mi(a));if(!l)return!1;var o=l.index+l[0].length;e[i]=n.slice(0,l.index)+(l.index&&o!=n.length?" ":"")+n.slice(o)||null}return!0})}),addLineWidget:it(function(e,t,a){return Fa(this,e,t,a)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,a){return ra(this,re(this,e),re(this,t),a,"range")},setBookmark:function(e,t){var a={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=re(this,e),ra(this,e,e,a,"bookmark")},findMarksAt:function(e){e=re(this,e);var t=[],a=Ya(this,e.line).markedSpans;if(a)for(var i=0;i<a.length;++i){var n=a[i];(null==n.from||n.from<=e.ch)&&(null==n.to||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,a){e=re(this,e),t=re(this,t);var i=[],n=e.line;return this.iter(e.line,t.line+1,function(l){if(l=l.markedSpans)for(var o=0;o<l.length;o++){var r=l[o];n==e.line&&e.ch>r.to||null==r.from&&n!=e.line||n==t.line&&r.from>t.ch||a&&!a(r.marker)||i.push(r.marker.parent||r.marker)}++n}),i},getAllMarks:function(){var e=[];return this.iter(function(t){if(t=t.markedSpans)for(var a=0;a<t.length;++a)null!=t[a].from&&e.push(t[a].marker)}),e},posFromIndex:function(e){var t,a=this.first;return this.iter(function(i){return i=i.text.length+1,i>e?(t=e,!0):(e-=i,void++a)}),re(this,Tn(a,t))},indexFromPos:function(e){e=re(this,e);var t=e.ch;return e.line<this.first||0>e.ch?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new dl(Ja(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,a=this.first+this.size;for(null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<a&&(a=e.to),t=new dl(Ja(this,t,a),e.mode||this.modeOption,t),e.sharedHist&&(t.history=this.history),(this.linked||(this.linked=[])).push({doc:t,sharedHist:e.sharedHist}),t.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],e=da(this),a=0;a<e.length;a++){var i=e[a],n=i.find(),l=t.clipPos(n.from),n=t.clipPos(n.to);wn(l,n)&&(l=ra(t,l,n,i.primary,i.primary.type),i.markers.push(l),l.parent=i)}return t},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var a=0;a<this.linked.length;++a)if(this.linked[a].doc==t){this.linked.splice(a,1),t.unlinkDoc(this),ca(da(this));break}if(t.history==this.history){var i=[t.id];Ga(t,function(e){i.push(e.id)},!0),t.history=new ii(null),t.history.done=ci(this.history.done,i),t.history.undone=ci(this.history.undone,i)}},iterLinkedDocs:function(e){Ga(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),dl.prototype.eachLine=dl.prototype.iter;var cl,ul=["iter","insert","remove","copy","getEditor"];for(cl in dl.prototype)dl.prototype.hasOwnProperty(cl)&&0>Li(ul,cl)&&(e.prototype[cl]=function(e){return function(){return e.apply(this.doc,arguments)}}(dl.prototype[cl]));Si(dl);var ml=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},pl=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},gl=e.e_stop=function(e){ml(e),pl(e)},hl=e.on=function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent?e.attachEvent("on"+t,a):(e=e._handlers||(e._handlers={}),(e[t]||(e[t]=[])).push(a))},bl=e.off=function(e,t,a){if(e.removeEventListener)e.removeEventListener(t,a,!1);else if(e.detachEvent)e.detachEvent("on"+t,a);else if(e=e._handlers&&e._handlers[t])for(t=0;t<e.length;++t)if(e[t]==a){e.splice(t,1);break}},vl=e.signal=function(e,t){var a=e._handlers&&e._handlers[t];if(a)for(var i=Array.prototype.slice.call(arguments,2),n=0;n<a.length;++n)a[n].apply(null,i)},fl=null,kl=30,yl=e.Pass={toString:function(){return"CodeMirror.Pass"}},Sl={scroll:!1},Cl={origin:"*mouse"},Tl={origin:"+move"};Ci.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var wl=e.countColumn=function(e,t,a,i,n){for(null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length)),i=i||0,n=n||0;;){var l=e.indexOf("\t",i);if(0>l||l>=t)return n+(t-i);n+=l-i,n+=a-n%a,i=l+1}},Al=[""],Ll=function(e){e.select()};gn?Ll=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:ln&&(Ll=function(e){try{e.select()}catch(e){}});var El,Fl=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Dl=e.isWordChar=function(e){return/\w/.test(e)||"\x80"<e&&(e.toUpperCase()!=e.toLowerCase()||Fl.test(e))},Rl=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;El=document.createRange?function(e,t,a,i){var n=document.createRange();return n.setEnd(i||e,a),n.setStart(e,t),n}:function(e,t,a){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",a),i.moveStart("character",t),i};var Il=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)};ln&&11>on&&(ji=function(){try{return document.activeElement}catch(e){return document.body}});var Bl,xl,zl=e.rmClass=function(e,t){var a=e.className,i=Mi(t).exec(a);if(i){var n=a.slice(i.index+i[0].length);e.className=a.slice(0,i.index)+(n?i[1]+n:"")}},Pl=e.addClass=function(e,t){var a=e.className;Mi(t).test(a)||(e.className+=(a?" ":"")+t)},Nl=!1,Ol=function(){if(ln&&9>on)return!1;var e=Pi("div");return"draggable"in e||"dragDrop"in e}(),jl=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,a=[],i=e.length;t<=i;){var n=e.indexOf("\n",t);-1==n&&(n=e.length);var l=e.slice(t,"\r"==e.charAt(n-1)?n-1:n),o=l.indexOf("\r");-1!=o?(a.push(l.slice(0,o)),t+=o+1):(a.push(l),t=n+1)}return a}:function(e){return e.split(/\r\n?|\n/)},Ml=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Vl=function(){var e=Pi("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Kl=null,Hl={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Hl,function(){for(var e=0;10>e;e++)Hl[e+48]=Hl[e+96]=String(e);for(e=65;90>=e;e++)Hl[e]=String.fromCharCode(e);for(e=1;12>=e;e++)Hl[e+111]=Hl[e+63235]="F"+e}();var _l,ql=function(){function e(e){return 247>=e?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(e):1424<=e&&1524>=e?"R":1536<=e&&1773>=e?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(e-1536):1774<=e&&2220>=e?"r":8192<=e&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,a){this.level=e,this.from=t,this.to=a}var a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,n=/[LRr]/,l=/[Lb1n]/,o=/[1n]/;return function(r){if(!a.test(r))return!1;for(var s,d=r.length,c=[],u=0;u<d;++u)c.push(e(r.charCodeAt(u)));for(var u=0,m="L";u<d;++u)s=c[u],"m"==s?c[u]=m:m=s;for(u=0,m="L";u<d;++u)s=c[u],"1"==s&&"r"==m?c[u]="n":n.test(s)&&(m=s,"r"==s&&(c[u]="R"));for(u=1,m=c[0];u<d-1;++u)s=c[u],"+"==s&&"1"==m&&"1"==c[u+1]?c[u]="1":","!=s||m!=c[u+1]||"1"!=m&&"n"!=m||(c[u]=m),m=s;for(u=0;u<d;++u)if(s=c[u],","==s)c[u]="N";else if("%"==s){for(m=u+1;m<d&&"%"==c[m];++m);var p=u&&"!"==c[u-1]||m<d&&"1"==c[m]?"1":"N";for(s=u;s<m;++s)c[s]=p;u=m-1}for(u=0,m="L";u<d;++u)s=c[u],"L"==m&&"1"==s?c[u]="L":n.test(s)&&(m=s);for(u=0;u<d;++u)if(i.test(c[u])){for(m=u+1;m<d&&i.test(c[m]);++m);for(s="L"==(m<d?c[m]:"L"),p="L"==(u?c[u-1]:"L")||s?"L":"R",s=u;s<m;++s)c[s]=p;u=m-1}for(var g,m=[],u=0;u<d;)if(l.test(c[u])){for(s=u,++u;u<d&&l.test(c[u]);++u);m.push(new t(0,s,u))}else{var h=u,p=m.length;for(++u;u<d&&"L"!=c[u];++u);for(s=h;s<u;)if(o.test(c[s])){for(h<s&&m.splice(p,0,new t(1,h,s)),h=s,++s;s<u&&o.test(c[s]);++s);m.splice(p,0,new t(2,h,s)),h=s}else++s;h<u&&m.splice(p,0,new t(1,h,u))}return 1==m[0].level&&(g=r.match(/^\s+/))&&(m[0].from=g[0].length,m.unshift(new t(0,0,g[0].length))),1==Ai(m).level&&(g=r.match(/\s+$/))&&(Ai(m).to-=g[0].length,m.push(new t(0,d-g[0].length,d))),2==m[0].level&&m.unshift(new t(1,m[0].to,m[0].to)),m[0].level!=Ai(m).level&&m.push(new t(m[0].level,d,d)),m}}();return e.version="5.2.0",e});