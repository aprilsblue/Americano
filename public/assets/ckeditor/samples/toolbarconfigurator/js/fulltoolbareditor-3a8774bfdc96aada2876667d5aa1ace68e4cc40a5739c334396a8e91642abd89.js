window.ToolbarConfigurator={},function(){function e(){this.instanceid="fte"+CKEDITOR.tools.getNextId(),this.textarea=new CKEDITOR.dom.element("textarea"),this.textarea.setAttributes({id:this.instanceid,name:this.instanceid,contentEditable:!0}),this.editorInstance=this.buttons=null}ToolbarConfigurator.FullToolbarEditor=e,e.prototype.init=function(t){var a=this;document.body.appendChild(this.textarea.$),CKEDITOR.replace(this.instanceid),this.editorInstance=CKEDITOR.instances[this.instanceid],this.editorInstance.once("configLoaded",function(i){var n=i.editor.config;delete n.removeButtons,delete n.toolbarGroups,delete n.toolbar,ToolbarConfigurator.AbstractToolbarModifier.extendPluginsConfig(n),i.editor.once("loaded",function(){a.buttons=e.toolbarToButtons(a.editorInstance.toolbar),a.buttonsByGroup=e.groupButtons(a.buttons),a.buttonNamesByGroup=a.groupButtonNamesByGroup(a.buttons),i.editor.container.hide(),"function"==typeof t&&t(a.buttons)})})},e.prototype.groupButtonNamesByGroup=function(t){var a=this;t=e.groupButtons(t);for(var i in t)t[i]=e.map(t[i],function(e){return a.getCamelCasedButtonName(e.name)});return t},e.prototype.getGroupByName=function(e){for(var t=this.editorInstance.config.toolbarGroups||this.getFullToolbarGroupsConfig(),a=t.length,i=0;i<a;i+=1)if(t[i].name===e)return t[i];return null},e.prototype.getCamelCasedButtonName=function(e){var t,a=this.editorInstance.ui.items;for(t in a)if(a[t].name==e)return t;return null},e.prototype.getFullToolbarGroupsConfig=function(e){e=!0===e;for(var t=[],a=this.editorInstance.toolbar,i=a.length,n=0;n<i;n+=1){var l=a[n],o={};"string"!=typeof l.name?e&&t.push("/"):(o.name=l.name,l.groups&&(o.groups=Array.prototype.slice.call(l.groups)),t.push(o))}return t},e.filter=function(e,t){for(var a=e&&e.length?e.length:0,i=[],n=0;n<a;n+=1)t(e[n])&&i.push(e[n]);return i},e.map=function(e,t){var a;if(CKEDITOR.tools.isArray(e)){a=[];for(var i=e.length,n=0;n<i;n+=1)a.push(t(e[n]))}else for(i in a={},e)a[i]=t(e[i]);return a},e.groupButtons=function(e){for(var t={},a=e.length,i=0;i<a;i+=1){var n=e[i],l=n.toolbar.split(",")[0];t[l]=t[l]||[],t[l].push(n)}return t},e.toolbarToButtons=function(t){for(var a=[],i=t.length,n=0;n<i;n+=1)"object"==typeof t[n]&&(a=a.concat(e.groupToButtons(t[n])));return a},e.createToolbarButton=function(t){var a=new CKEDITOR.dom.element("a"),i=e.createIcon(t.name,t.icon,t.command);if(a.setStyle("float","none"),a.addClass("cke_"+("rtl"==CKEDITOR.lang.dir?"rtl":"ltr")),t instanceof CKEDITOR.ui.button)a.addClass("cke_button"),a.addClass("cke_toolgroup"),a.append(i);else if(CKEDITOR.ui.richCombo&&t instanceof CKEDITOR.ui.richCombo){var i=new CKEDITOR.dom.element("span"),n=new CKEDITOR.dom.element("span"),l=new CKEDITOR.dom.element("span");a.addClass("cke_combo_button"),i.addClass("cke_combo_text"),i.addClass("cke_combo_inlinelabel"),i.setText(t.label),n.addClass("cke_combo_open"),l.addClass("cke_combo_arrow"),n.append(l),a.append(i),a.append(n)}return a},e.createIcon=function(e,t,a){var i=CKEDITOR.skin.getIconStyle(e,"rtl"==CKEDITOR.lang.dir),i=(i=i||CKEDITOR.skin.getIconStyle(t,"rtl"==CKEDITOR.lang.dir))||CKEDITOR.skin.getIconStyle(a,"rtl"==CKEDITOR.lang.dir);return t=new CKEDITOR.dom.element("span"),t.addClass("cke_button_icon"),t.addClass("cke_button__"+e+"_icon"),t.setAttribute("style",i),t.setStyle("float","none"),t},e.createButton=function(e,t){var a=new CKEDITOR.dom.element("button");if(a.addClass("button-a"),a.setAttribute("type","button"),"string"==typeof t){t=t.split(" ");for(var i=t.length;i--;)a.addClass(t[i])}return a.setHtml(e),a},e.groupToButtons=function(t){for(var a=[],i=(t=t.items)?t.length:0,n=0;n<i;n+=1){var l=t[n];(l instanceof CKEDITOR.ui.button||CKEDITOR.ui.richCombo&&l instanceof CKEDITOR.ui.richCombo)&&(l.$=e.createToolbarButton(l),a.push(l))}return a}}();